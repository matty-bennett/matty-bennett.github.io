YUI.add("hermes-template-fluid-modal-nav-bar",function(a,e){var n=a.Template.Handlebars.revive({1:function(a,e,n,l,t){var r;return null!=(r=n.unless.call(null!=e?e:{},null!=e?e.disabled:e,{name:"unless",hash:{},fn:a.program(2,t,0),inverse:a.noop,data:t}))?r:""},2:function(a,e,n,l,t){var r,u,i=null!=e?e:{},s=n.helperMissing,o=a.escapeExpression;return'\t\t\t<li data-id="'+o("function"==typeof(u=null!=(u=n.id||(null!=e?e.id:e))?u:s)?u.call(i,{name:"id",hash:{},data:t}):u)+'" data-value="'+o("function"==typeof(u=null!=(u=n.value||(null!=e?e.value:e))?u:s)?u.call(i,{name:"value",hash:{},data:t}):u)+'" class="link '+(null!=(r=n.if.call(i,null!=e?e.selected:e,{name:"if",hash:{},fn:a.program(3,t,0),inverse:a.noop,data:t}))?r:"")+" "+(null!=(r=n.if.call(i,null!=e?e.hiddenByDefault:e,{name:"if",hash:{},fn:a.program(5,t,0),inverse:a.noop,data:t}))?r:"")+'" tabindex="0"><a data-value="'+o("function"==typeof(u=null!=(u=n.value||(null!=e?e.value:e))?u:s)?u.call(i,{name:"value",hash:{},data:t}):u)+'">'+o("function"==typeof(u=null!=(u=n.name||(null!=e?e.name:e))?u:s)?u.call(i,{name:"name",hash:{},data:t}):u)+"</a></li>\n"},3:function(a,e,n,l,t){return"selected"},5:function(a,e,n,l,t){return"hidden"},7:function(a,e,n,l,t){return'\t\t\t<form action="/search" method="get" role="search">\n\t\t\t\t<input type="text" name="text" value="" class="search-field" autocomplete="off" aria-label="Search" role="textbox">\n\t\t\t\t<input type="submit" class="search-icon" tabindex="-1" aria-label="Search" role="button">\n\t\t\t</form>\n'},compiler:[7,">= 4.0.0"],main:function(a,e,n,l,t){var r,u=null!=e?e:{};return'<div class="fluid-modal-nav-bar">\n\t<div class="fluid-modal-nav-content">\n\t\t<ul class="links">\n'+(null!=(r=n.each.call(u,null!=e?e.links:e,{name:"each",hash:{},fn:a.program(1,t,0),inverse:a.noop,data:t}))?r:"")+"\t\t</ul>\n"+(null!=(r=n.if.call(u,null!=e?e.enableSearch:e,{name:"if",hash:{},fn:a.program(7,t,0),inverse:a.noop,data:t}))?r:"")+"\t</div>\n</div>\n"},useData:!0}),l={};a.Array.each([],function(e){var n=a.Template.get("hermes/"+e);n&&(l[e]=n)}),a.Template.register("hermes/fluid-modal-nav-bar",function(e,t){return t=t||{},t.partials=t.partials?a.merge(l,t.partials):l,n(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("fluid-modal-nav-bar-view",function(e){"use strict";var t;t={css:{nav:".fluid-modal-nav-bar",navContent:".fluid-modal-nav-content",links:".links",link:".link"},options:{}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){var t,i,n=this.get("breakpointConfig")||[],a=this.appContext.viewportData.getWidth();for(i=n.sort(function(e,t){return e.maxWidth-t.maxWidth}),t=0;t<i.length;t++)if(a<i[t].maxWidth){this.mobileConfig=i[t],this.set("links",this.mobileConfig.links),this.set("enableSearch",this.mobileConfig.enableSearch);break}return this},loadState:function(){return this},buildContainer:function(){var e;return e={links:this.get("links"),enableSearch:this.get("enableSearch")},this.setContainerWithTemplate("fluid-modal-nav-bar",e),this},activate:function(){var e=this.get("container"),t=this;return this.registerEventHandler(e.on("click",this.handleClick.bind(this))),this.registerEventHandler(e.on("key",this.handleClick.bind(this),"down:13")),this.get("links").forEach(function(i){i.selected&&t.set("currentSelection",e.one('.link[data-id="'+i.id+'"]'))}),this},deselectAll:function(){this.get("container").one(t.css.nav).one(t.css.navContent).one(t.css.links).all(t.css.link).removeClass("selected")},handleClick:function(t){var i,n,a=t.target,s=a.get("parentNode"),l=this.get("container"),r={},o=this.appContext.getViewer().nsid;"a"===a.getDOMNode().tagName.toLowerCase()?(t.halt(),this.deselectAll(),s.addClass("selected"),this.set("currentSelection",s),(i=l.one(".search-field"))&&(i.getDOMNode().value=""),this.fire("subviewViewEvent","navigation",t)):a.hasClass("link")?(t.halt(),this.deselectAll(),a.addClass("selected"),this.set("currentSelection",a),(i=l.one(".search-field"))&&(i.getDOMNode().value=""),this.fire("subviewViewEvent","navigation",t)):(i=l.one(".search-field"),this.get("enableSearch")&&i&&(n=l.one(".search-field").getDOMNode(),"submit"===a.getDOMNode().type&&(t.halt(),r.apiParams={},r.apiParams[e.AttributeHelpers.coerceString(n.name)]=n.value,r.id=e.SearchHelper.generateQueryString(r.apiParams)||e.guid(),r.viewerNsid=o,this.fire("subviewViewEvent","search",r),this.deselectAll(),this.set("currentSelection",{type:"search",modelParams:r}))))},onParentViewEvent:function(t,i){var n=this.get("currentSelection");"backToList"===i[0]&&(n instanceof e.Node?this.get("currentSelection").getDOMNode().click():"search"===n.type&&this.fire("subviewViewEvent","search",n.modelParams))}},{ATTRS:{links:{value:[],validator:function(t){return e.Lang.isArray(t)}},currentSelection:{value:null},enableSearch:{value:!0,validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},breakpointConfig:{value:null}}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-fluid-modal-nav-bar","attribute-helpers","search-helper"],langBundles:["common","wallart"],optional:["person-models","photo-models"]});YUI.add("math-helper",function(e){e.MathHelper=function(e){return{seedRandom:function(e){return 0+1*((e=(9301*e+49297)%233280)/233280)}}}},"@VERSION@",{requires:[]});YUI.add("hermes-template-slim-footer",function(e,a){var t=e.Template.Handlebars.revive({1:function(e,a,t,n,s){return'\t\t<a class="trustarc-cookie-pref-butt">'+e.escapeExpression((t.intlMessage||a&&a.intlMessage||t.helperMissing).call(null!=a?a:{},{name:"intlMessage",hash:{intlName:"policy-terms.COOKIES"},data:s}))+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,a,t,n,s){var l,i=null!=a?a:{},r=t.helperMissing,o=e.escapeExpression,c=e.lambda;return'<div class="slim-footer">\n\t<a href="/about" data-track="footer-about">'+o((t.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:s}))+'</a>\n\t<a href="/jobs" data-track="footer-jobs">'+o((t.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"common.JOBS"},data:s}))+'</a>\n\t<a href="//blog.flickr.net/en" data-track="footer-blog">'+o((t.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"common.BLOG"},data:s}))+'</a>\n\t<a href="/services/developer" data-track="footer-developers">'+o((t.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"common.DEVELOPERS"},data:s}))+'</a>\n\t<a href="/help/guidelines" data-track="footer-guidelines">'+o((t.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"common.GUIDELINES"},data:s}))+'</a>\n\t<a href="//help.flickr.com" data-track="footer-help">'+o((t.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"common.HELP"},data:s}))+'</a>\n\t<a href="/help/forum" data-track="footer-forum">'+o((t.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"common.HELP_FORUM"},data:s}))+'</a>\n\t<a href="/help/privacy" data-track="footer-privacy">'+o((t.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"common.PRIVACY"},data:s}))+'</a>\n\t<a href="/help/terms" data-track="footer-terms">'+o((t.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"common.TERMS"},data:s}))+"</a>\n"+(null!=(l=(t.isFlipped||a&&a.isFlipped||r).call(i,"enable-cookie-consent-execution-hermes",{name:"isFlipped",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'\t<div class="foot-li lang-switcher">\n\t\t<a href="/change_language.gne?lang='+o(c(null!=(l=null!=a?a.selectedLang:a)?l.code:l,a))+"&csrf="+o(c(null!=(l=null!=a?a.selectedLang:a)?l.csrf:l,a))+'" data-track="footer-language">'+o(c(null!=(l=null!=a?a.selectedLang:a)?l.name:l,a))+'</a>\n\t\t<div class="arrow">\n\t\t\t<svg class="icon icon-caret-down"><use xlink:href="#icon-caret-down"></use></svg>\n\t\t</div>\n\t </div>\n</div>\n\t'},useData:!0}),n={};e.Array.each([],function(a){var t=e.Template.get("hermes/"+a);t&&(n[a]=t)}),e.Template.register("hermes/slim-footer",function(a,s){return s=s||{},s.partials=s.partials?e.merge(n,s.partials):n,t(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("dropdown",function(e){"use strict";var t;t={css:{closed:"ui-dropdown-closed",shim:"ui-dropdown-shim",label:'span[data-action="toggle"]',items:"[data-value]",itemSelected:"ui-dropdown-item-selected",hasDialogArrow:"ui-dropdown-has-dialog-arrow",dialogArrow:"ui-dialog-arrow",useCheckMarks:"ui-dropdown-use-checkboxes"},options:{hasDialogArrow:!1,useCheckMarks:!1}},e.namespace("Views").Dropdown=e.Base.create("Dropdown",e.FlickrView,[],{initializer:function(e){!1!==e.activate&&this.activate()},activate:function(){var s,i=this,a=this.get("container");if(this.close(),this._items={},e.Lang.isArray(this.get("selected"))||this.set("selected",[this.get("selected")]),a.all(t.css.items).each(function(e){var t=e.getData();i._items[t.value]={text:t.text||'no data-text for "'+t.value+'"',sub:t.sub,node:e}}),this.labelEl=a.one(t.css.label),this.labelEl||(this.labelEl=e.Node.create('<span class="truncate" data-action="toggle" tabindex="0" aria-haspopup="true" aria-expanded="false" />'),a.insert(this.labelEl,0)),(s=this.get("staticLabel")||this.get("defaultLabel"))&&(!0===s?this.labelEl.set("text","set staticLabel/defaultLabel to a string, not `true`"):this.labelEl.set("text",s)),this.get("hasDialogArrow")&&!a.hasClass(t.css.hasDialogArrow)&&a.addClass(t.css.hasDialogArrow),a.hasClass(t.css.hasDialogArrow)&&(this.dialogArrowEl=a.one(t.css.dialogArrow),this.dialogArrowEl||(this.dialogArrowEl=e.Node.create('<span class="ui-dialog-arrow" />'),a.insert(this.dialogArrowEl,1))),this.get("useCheckMarks")&&!a.hasClass(t.css.useCheckMarks)&&a.addClass(t.css.useCheckMarks),this.select(),this.get("disabled"))return this.disable();this.attachEvents({":toggle":this.toggle.bind(this),":set":this.setData.bind(this)}),this.registerEventHandler(this.labelEl.on("key",this.toggle,"down:13",this)),this.registerEventHandler(this.labelEl.on("key",this.enterDropdown,"down:40",this));var l=this.labelEl.next("ul");l&&(this.registerEventHandler(l.on("keydown",this.keyboardNavigation,this)),this.registerEventHandler(l.delegate("key",function(e){document.activeElement.dataset&&this.setData(e,document.activeElement.dataset)},"down:13","li",this)))},setData:function(t,s){if(t.halt(),!this.get("multiSelect")&&!this.get("multiSelectSub")&&e.Array.indexOf(this.get("selected"),s.value)>=0)return this.close();this.select(s.value,s)},select:function(s,i,a){var l,n=this,h=s?this._items[s]:null,o=!0,c=[];h&&e.Array.indexOf(this.get("selected"),s)>=0&&(this.get("multiSelect")||this.get("multiSelectSub"))?(c=this.get("selected"),!h.sub&&this.get("multiSelect")&&c.length>this.get("minimumSelected")?(c.splice(e.Array.indexOf(this.get("selected"),s),1),o=!1):h.sub&&(c.splice(e.Array.indexOf(this.get("selected"),s),1),o=!1),this.set("selected",c)):h&&(h.sub?(c.push(s),this.get("selectParent")&&c.push(h.sub),e.Array.each(this.get("selected"),function(e){n._items[e].sub===h.sub?c.push(e):n.get("multiSelect")&&!n._items[e].sub&&c.push(e)})):this.get("multiSelect")?(c=this.get("selected")).push(s):c.push(s),this.set("selected",c)),a||this.close(),l={clicked:h?{text:h.text,value:s,sub:h.sub,itemEl:h.node,isChecked:o}:null,data:i,selections:c},this.fire("selected",l),this.update(s,l,t)},update:function(t,s,i){var a=this,l=s.clicked,n=this.get("selected"),h=this.get("defaultLabel")||"[Unable to select a default item]";this.get("staticLabel")||(this.get("labelFunction")?h=this.get("labelFunction").apply(this,[t]):l?h=s.data&&s.data.text&&s.data.text!==l.text?s.data.text:l.text:n.length>0&&a._items[n[0]]&&(h=a._items[n[0]].text),this.labelEl.set("textContent",h||"[!empty data-text!]")),this.get("container").all(i.css.items).removeClass(i.css.itemSelected),e.Array.each(n,function(e){a._items[e]&&a._items[e].node.addClass(i.css.itemSelected)})},toggle:function(e){e&&e.halt(),this._open?this.close(e):this.open(e)},open:function(e){var s=this.get("container"),i=0;this._open=!0,this.get("shouldCreateShim")&&this._shimUp(),s.removeClass(t.css.closed),this.get("autoSizeMenu")&&(i=parseInt(this.labelEl.getComputedStyle("width"),10))+30>parseInt(s.one("ul").getComputedStyle("width"),10)&&s.one("ul").setStyles({width:i+30}),e&&e.silent||this.fire("open",e);var a=s.one("span:first-child");a&&a.setAttribute("aria-expanded","true")},close:function(e){var s=this.get("container");e&&e.halt(),this._open=!1,this._shimUp(!1),this.fire("close",e),s.addClass(t.css.closed);var i=this.labelEl;i&&i.setAttribute("aria-expanded","false")},enterDropdown:function(e){e.preventDefault();var t=this.labelEl.next("ul").one("li");t&&t.focus()},keyboardNavigation:function(e){var t=e.keyCode,s=38===t||9===t&&e.shiftKey,i=40===t||9===t&&!e.shiftKey,a=e.target.ancestor("li",!0);s&&a&&a.previous("li")?(e.preventDefault(),this.focusOnPreviousItem(e)):i?(e.preventDefault(),a&&a.next("li")&&this.focusOnNextItem(e)):(27===t||s)&&(e.preventDefault(),this.labelEl&&(this.labelEl.focus(),this.close()))},focusOnPreviousItem:function(e){var t=e.target.ancestor("li",!0);if(t){var s=t.previous("li");s&&(s.one("a")?s.one("a").focus():s.focus())}},focusOnNextItem:function(e){var t=e.target.ancestor("li",!0);if(t){var s=t.next("li");s&&(s.one("a")?s.one("a").focus():s.focus())}},_shimUp:function(s){if(!1===s){if(!this._shim)return;return this._shim.detach("click").remove(),void(this._shim=null)}this._shim=e.Node.create("<div />"),this._shim.addClass(t.css.shim),this._shim.on("click",this.close.bind(this)),this.get("container").appendChild(this._shim)},disable:function(){var e=this.get("container");this.set("disabled",!0),this.close(),e.addClass(t.css.disabled),e.detach()},destructor:function(){this._shimUp(!1),this._items=null,this.labelEl=null,this.set("selected",null),this.detachAll()}},{ATTRS:{selected:{value:[]},disabled:{value:!1},hasDialogArrow:{value:!1},useCheckMarks:{value:!1},multiSelect:{value:!1},multiSelectSub:{value:!1},selectParent:{value:!0},minimumSelected:{value:0},staticLabel:{value:!1},defaultLabel:{value:!1},labelFunction:function(){},shouldCreateShim:{value:!0},autoSizeMenu:{value:!0}}})},"@VERSION@",{requires:["flickr-view"]});YUI.add("footer-helper",function(e,n){require("hermes-core/flog")(n);var r=["en-US","zh-HK","de-DE","es-US","fr-FR","ko-KR","it-IT","pt-BR","vn-VN","id-ID"],o={"en-US":"English","de-DE":"Deutsch","es-US":"Español","fr-FR":"Français","ko-KR":"한글","it-IT":"Italiano","pt-BR":"Português","vn-VN":"Tiếng Việt","id-ID":"Bahasa Indonesia","zh-HK":"繁體中文"};e.FooterHelper=function(n,a){var t,s,i,d,u,c=[],l=n.lang;for(d=n.auth&&n.auth.csrf?n.auth.csrf:"","vi-vn"===l.toLowerCase()&&(l="vn-VN"),u={code:l,name:o[l],csrf:d},s=0,i=r.length;s<i;s++)r[s]!==l&&"string"==typeof r[s]&&c.push({code:r[s].toLowerCase(),name:o[r[s]],csrf:d});t=c.map(function(e){return{href:"/change_language.gne?lang="+e.code+"&csrf="+e.csrf,text:e.name}});var f={createDropAround:function(r,o){var a,s;(s=r.one("a")).addClass("dimmed"),(a=new e.Views.FluidDroparound({anchorOffsetHorizontal:15,appContext:n,showDropArrow:!0,observePageResize:!0,dismissOnOverlayClick:!0,anchorElement:r.one(".arrow"),classList:"lang-droparound",menuItems:t})).show(),o.registerEventHandler(a.on("closeDroparound",function(e){s.removeClass("dimmed")}))},getTemplateParams:function(){return{selectedLang:u,helpLocaleKey:u.code.replace("-","_")||"en_US",menuLangs:c}}};return e.augment(f,e.EventTarget),f}},"@VERSION@",{requires:["dropdown","fluid-droparound-view","event-custom"]});YUI.add("slim-footer-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.footerHelper=new e.FooterHelper(this.appContext,{}),this},buildContainer:function(){var t;return this.get("viewer")&&e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))}),t=this.footerHelper.getTemplateParams(),YUI.Env.isServer?t.pageUrl=this.appContext.request.url:t.pageUrl=window.location.pathname,this.setContainerWithTemplate("slim-footer",t),this},activate:function(){var e,t=this,r=this.get("container");return this.registerEventHandler(r.delegate("click",function(r){e=r.target.ancestor(".lang-switcher",!0),r.preventDefault(),t.footerHelper.createDropAround(e,t)},".lang-switcher")),this}})},"@VERSION@",{requires:["flickr-view","hermes-template-slim-footer","url-helper","footer-helper"],langBundles:["common","policy-terms"]});YUI.add("hermes-lang-policy-terms",function(o,O){o.Intl.add("hermes/policy-terms","en-US",{DOWNLOAD_TERMS_OF_SERVICE:["Download Terms of Service"],DOWNLOAD_PRIVACY_POLICY:["Download Privacy Policy"],DOWNLOAD_API_TERMS:["Download API Terms of Service"],DOWNLOAD_COMMUNITY_GUIDELINES:["Download Community Guidelines"],DOWNLOAD_COOKIE_POLICY:["Download Cookie Policy"],DOWNLOAD_DATA_PROCESSING_POLICY:["Download Data Processing Policy"],POLICIES_AND_GUIDELINES:["Policies & Guidelines"],TERMS:["Terms"],PRIVACY:["Privacy"],API:["API"],COMMUNITY:["Community"],COOKIES:["Cookies"],DATA_PROCESSING:["Data Processing"]})},"@VERSION@",{requires:["intl"]});YUI.add("global-nav-view",function(e,t){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var i,n;if(void 0===t.enableBrowserUpgradeBanner&&(t.enableBrowserUpgradeBanner=!0),this.set("showBrowserUpgradeBanner",!1),YUI.Env.isServer&&t.enableBrowserUpgradeBanner){var o=this.appContext.request.headers["user-agent"],r=e.BrowserSupport.isUnsupportedBrowser(o),a=e.BrowserSupport.isBot(o),s=e.BrowserSupport.isSharingBot(o);!r||a||s||this.set("showBrowserUpgradeBanner",!0)}if(!YUI.Env.isServer){var l=e.StorageHelper.getItem("hasDismissedBrowserUpgradeBanner",!0);l&&"true"===l&&this.set("showBrowserUpgradeBanner",!1)}return""===this.get("container").get("innerHTML")&&this.setContainerHTML('<div class="global-nav-content"></div>'),this.appStateParams=t,this.themeClass=t.theme||"default-theme",i=this.appContext.getLocation(),n=t.modelParams&&t.modelParams.apiParams?t.modelParams.apiParams:i.href,this.searchUrl=new e.SearchUrl(n,this.appContext,t.searchType),this.appContext.flipper.isFlipped("enable-signed-out-cta-test")&&(this.signedOutTest=!0),this.appContext.flipper.isFlipped("enable-sign-up-interstitial-test")&&"en-us"===this.appContext.lang.toLowerCase()&&(this.signUpInterstitialTest=!0),!this.appContext.flipper.isFlipped("enable-sign-up-rail-test")||"en-us"!==this.appContext.lang.toLowerCase()||this.appContext.getViewer().signedIn||t.isSOHP||(this.signUpRailTest=!0),this.isSOHP=t.isSOHP,this.isProPage=t.isProPage,this.disableMobileNav=t.disableMobileNav,this.hideBanner=t.isSearchResults,this.isRefencingAnnouncementPage=t.isRefencingAnnouncementPage,this.uploadLimitDismissHours=48,this.isDesktopWidthBreakpoint=1080,this.photoPrintsHelper=new e.PhotoPrintsHelper(this.appContext),this.mathHelper=new e.MathHelper,this},subviewConfig:{"search-autosuggest-field-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,isSOHP:this.isSOHP},"account-menu-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"notifications-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.flipper.isFlipped("notifications-menu")}},"browser-upgrade-banner-view":{requiredToShowOnServer:!0,requiredToShowOnClient:!1,dealbreaker:!1,disabled:function(){return!this.get("showBrowserUpgradeBanner")}},"person-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,containerSelector:"#content",excludeSelectors:[".c-account-menu"],disabled:function(){return!(this.appContext.flipper.isFlipped("enable-hover-account-menu")&&this.appContext.flipper.isFlipped("rebootify-group-discussions-list"))}},"group-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,containerSelector:"#content",excludeSelectors:[".c-account-menu"],disabled:function(){return!(this.appContext.flipper.isFlipped("enable-hover-account-menu")&&this.appContext.flipper.isFlipped("rebootify-group-discussions-list"))}},"signup-rail-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,additionalViewClasses:["collapsed"],disabled:function(e){return e.isMobile||!this.signUpRailTest}},"partner-account-banner-view":{requiredToShowOnServer:!1,requiredToShowOnClient:!1},"featured-toast-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"slim-footer-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,additionalViewClasses:["navbar-footer-placement","mobile-nav-drawer-list"],disabled:function(){return!this.appContext.flipper.isFlipped("enable-cookie-consent-execution-hermes")}}},loadState:function(){var t=this,i=this.appContext.getViewer(),n=[];return i.signedIn?(n.push(this.appContext.getModel("person-models",i.nsid).then(function(e){t.set("viewer",e),t.elementStates=t.setElementStates(t.appStateParams)})),n.push(this.appContext.getModel("person-profile-models",i.nsid).then(function(e){t.profileModel=e}))):this.elementStates=this.setElementStates(this.appStateParams),e.Promise.all(n).then(function(){t.get("viewer");!YUI.Env.isServer&&t.appContext.flipper.isFlipped("enable-feedback-modal")&&"en-US"===t.appContext.lang&&e.config.flickr&&e.config.flickr.geo&&!localStorage.getItem("feedbackmodalseen4_20")&&"photostream-route"!==this.appContext.routeConfig.module&&(t.meetsFeedbackCriteria=!0)})},buildContainer:function(){var t,i={},n=this.appContext.getViewer().signedIn;return this.get("viewer")&&(i=e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))})),t={theme:this.themeClass,disableMobileNav:this.disableMobileNav,"show-browser-upgrade-banner":this.get("showBrowserUpgradeBanner"),showNotificationsMenu:!1,viewer:i,isSignedIn:n,elements:this.elementStates,isRefencingAnnouncementPage:this.isRefencingAnnouncementPage},this.appContext.flipper.isFlipped("notifications-menu")&&n&&(t["notifications-menu-view"]=this.subviews["notifications-menu-view"].get("container"),t.showNotificationsMenu=!0),this.photoPrintsHelper.isPrintsEnabled()&&(t.printCartUrl=this.photoPrintsHelper.getCartUrl()),this.setContainerWithTemplate("global-nav",t),this},activate:function(){var i,n,o,r=this,a=this.get("container");return n=["photo-page-ad-scrappy-view","sohp-view"],i=this.appContext.flapp.get("activeView").name,this.contentContainer=a.one(".global-nav"),a.one(".mobile-nav-toggle")&&(this.navDrawer=a.one(".mobile-nav-drawer"),this.navDrawerOverlay=a.one(".mobile-nav-drawer-overlay"),this.registerEventHandler(a.one(".mobile-nav-toggle").on("click",function(e){r.navDrawerShown?r.hideMobileNavDrawer():r.showMobileNavDrawer()})),this.registerEventHandler(this.navDrawer.delegate("click",this.handleDrawerItemClick.bind(this),".mobile-nav-menu-item"))),a.one(".mobile-search-button")?(this.registerEventHandler(a.one(".mobile-search-button").on("click",function(t){e.rapidTracker.beacon(r.name,"mobile-nav-search");var i=r.get("container");r.contentContainer.addClass("search-open"),r.fire("parentViewEvent","focus-search-field"),i.one(".flickr-logo-container").addClass("hidden")}.bind(this))),this.registerEventHandler(e.on("add-context-to-search-field",function(e){r.contentContainer.addClass("search-open"),r.fire("parentViewEvent","focus-search-field")},this))):this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(t){var i=e.config.win.innerWidth<=this.isDesktopWidthBreakpoint,n=i?this.appContext.viewportData.getWidth():0,o=i?46:0;i||(r.contentContainer.removeClass("search-open"),a.one(".flickr-logo-container").removeClass("hidden")),r.fire("parentViewEvent","resize-search-field",n-o)}.bind(this))),a.one(".mobile-search-close-button")&&this.registerEventHandler(a.one(".mobile-search-close-button").on("click",function(e){r.contentContainer.removeClass("search-open"),a.one(".flickr-logo-container").removeClass("hidden"),r.fire("parentViewEvent","clear-search-field")}.bind(this))),this.appContext.getViewer().signedIn||(this.signedOutTest&&a.one(".gn-upload .gn-title")&&this.registerEventHandler(a.one(".gn-upload .gn-title").on("click",this.signUpAndUpload.bind(this))),n.indexOf(i)<0&&!this.isMobile&&this.signUpInterstitialTest&&this.startInterstitialTimer()),e.AnchorRepositioner.addOffset(t,a),this.registerEventHandler(a.delegate("keydown",this.toggleSubmenu.bind(this),"a[aria-haspopup=true]")),this.registerEventHandler(a.delegate("keydown",this.enterSubmenu.bind(this),"a[aria-haspopup=true]")),this.registerEventHandler(a.on("keydown",this.goToSubmenuHeading.bind(this),"ul.gn-submenu")),this.registerEventHandler(a.delegate("keydown",this.keyboardNavigation.bind(this),"ul.nav-menu")),this.registerEventHandler(a.delegate("mouseup",this.toggleAriaExpanded.bind(this),"a[aria-haspopup=true]")),this.showFeedbackModal(),this.toastSubview=this.subviews["featured-toast-view"],this.registerEventHandler(e.on("accountCard:overLimitLearnMoreClick",function(){r.showOverLimitToast()})),this.registerEventHandler(e.on("printsPage:choosePhotosClicked",function(){r.handlePrintClick()})),this.photoPrintsHelper.isPrintsEnabled()&&(this.printsButton=a.one(".gn-create .prints-button"),this.mobilePrintsButton=a.one(".mobile-nav-drawer .prints-button"),this.cartLink=a.one(".gn-create .cart-link"),this.mobileCartLink=a.one(".mobile-nav-drawer .cart-link"),this.printsButton&&this.registerEventHandler(this.printsButton.on("click",this.handlePrintClick.bind(this))),this.mobilePrintsButton&&this.registerEventHandler(this.mobilePrintsButton.on("click",this.handlePrintClick.bind(this))),(this.cartLink||this.mobileCartLink)&&(this.photoPrintsHelper.fetchCartCount().then(function(e){var t=e?e.count:0,i=r.intlMessage({intlName:"prints.VIEW_CART_WITH_COUNT",count:void 0!==t?t.toString():"0"});t>0&&(r.cartLink.removeClass("disabled"),r.mobileCartLink.removeClass("disabled")),r.cartLink.set("innerHTML",i),r.mobileCartLink.set("innerHTML",i)}).catch(function(e){var t=r.intlMessage({intlName:"prints.VIEW_CART_WITH_COUNT",count:"0"});r.cartLink.set("innerHTML",t),r.mobileCartLink.set("innerHTML",t)}),this.prepareOrderConfirmationModal())),o=this.appContext.getViewer(),this.appContext.bannerManager.loadBanners([{type:"loginMigration",priority:2,placement:"header"},{type:"pastDue",priority:1,placement:"header"},{type:"braintreeMigrate",priority:0,placement:"header"},{type:"cookieConsent",priority:0,placement:"footer"},{type:"uploadLimit",priority:0,placement:"toast"}]).then(function(){var e=this.appContext.bannerManager.getBanners(["header","footer"]);0===e.length&&(e=this.appContext.bannerManager.getBanners(["toast"])),e.forEach(function(e){return this.appContext.bannerManager.renderBannerView(e)})}),this.registerEventHandler(this.appContext.bannerManager.on("renderBanner",function(t){var i,n,o;return"header"===t.placement?(i=t.bannerView,n=i.get("container"),(o=a.one(".nav-banner-container")).empty(),o.appendChild(n),i.on("subviewActivated",function(){e.fire("globalNav:bannerSubviewActivated")}),i.on("dismissed",function(){i.get("container").remove(),i.destroy(),e.fire("globalNav:bannerDismissed")}),i.normalizedActivate()):"toast"===t.placement?(i=t.bannerView,n=i.get("container"),i.activate().then(function(){var e=i.subview;r.toastSubview.setup(e.featuredToastConfig),r.toastSubview.on("primaryActionClicked",function(t){e.handleToastPrimaryActionClick(t)}),r.toastSubview.on("secondaryActionClicked",function(t){e.handleToastSecondaryActionClick(t)}),i.on("dismissed",function(){r.toastSubview.dismiss()}),r.toastSubview.show()})):void 0})),this.appContext.flipper.isFlipped("enable-photo-limit-pro-redir")&&o.signedIn&&"en-us"===this.appContext.lang.toLowerCase()&&e.UserLimitsHelper.isOverARRLimit(this.profileModel,this.appContext)&&!this.appContext.getCookie(e.config.flickr.upload_blocking.photo_limit_pro_redir_cookie_name)&&(this.setProRedirectCookie(),this.appContext.flapp.navigate(e.config.flickr.upload_blocking.photo_limit_pro_redir_url)),this},showFeedbackModal:function(){var t=this,i=e.QueryString.parse(e.config.win.location.search.replace("?","")),n=e.config.win.location.href;if(t.appContext.flipper.isFlipped("enable-feedback-modal")&&i&&void 0!==i.survey&&(n=n.replace("?survey",""),e.config.win.history.replaceState({},"",n),this.meetsFeedbackCriteria=!0),this.meetsFeedbackCriteria){var o,r=this.templates("feedback-modal-view")({}),a=[],s=!0;return this.appContext.getViewer().signedIn&&(this.get("viewer").getValue("isPro")&&a.push(this.appContext.getModel("person-proStatus-models",t.get("viewer").id).then(function(e){t.proStatusModel=e,s=1e3*e.toJSON().firstStart-new Date("November 1, 2018").getTime()>0})),a.push(this.appContext.getModel("person-profile-models",t.get("viewer").id).then(function(e){t.profileModel=e}))),e.Promise.all(a).then(function(){var i;(i=new e.Views.FluidModal({appContext:t.appContext,noScroll:!0,hideModalOverlay:!1,maxHeight:!1,showFooter:!1,classList:"modal-restyle",width:560,htmlMessage:r})).show(),i.on("activated",function(){o=i.get("container").one(".accept-button"),i.get("container").one(".cancel-button").on("click",function(e){i.close()}),o.on("click",function(e){var n,r,a,s,l="https://selfserve.decipherinc.com/survey/selfserve/2225/200401?list=3",c="no",p=t.appContext.getViewer().signedIn?"yes":"no";o.setAttribute("disabled"),t.appContext.getViewer().signedIn&&(r=t.appContext.getViewer().nsid,n=t.get("viewer").getValue("isPro")?"pro":"free",s=t.get("viewer").getValue("dateCreated").year()),t.proStatusModel&&(c=1e3*t.proStatusModel.toJSON().firstStart-new Date("November 1, 2018").getTime()>0?"yes":"no"),t.profileModel&&(a=t.profileModel.getValue("photoCount")),a&&(l+="&nop="+encodeURIComponent(a)),n&&(l+="&at="+encodeURIComponent(n)),c&&(l+="&np="+encodeURIComponent(c)),s&&(l+="&y="+encodeURIComponent(s)),r&&(l+="&id="+encodeURIComponent(r)),p&&(l+="&li="+encodeURIComponent(p)),window.open(l,"_blank"),i.close()})}),i.on("close",function(){localStorage.setItem("feedbackmodalseen4_20",!0)})})}},clearKeyboardFocus:function(e){this.get("container").all(".has-keyboard-focus").removeClass("has-keyboard-focus"),this.get("container").all(".nav-menu a[aria-expanded=true]").setAttribute("aria-expanded","false")},toggleAriaExpanded:function(e){e.target.setAttribute("aria-expanded","false"===e.target.getAttribute("aria-expanded")?"true":"false")},enterSubmenu:function(e){if(40===e.keyCode){e.preventDefault();var t=e.target.next("ul");t&&t.hasClass("has-keyboard-focus")&&t.one(":first-child").one(":first-child").focus()}},toggleSubmenu:function(e){var t=e.keyCode;if(13===t||32===t){e.preventDefault();var i=e.target.next("ul");i&&(i.hasClass("has-keyboard-focus")?this.clearKeyboardFocus():(i.addClass("has-keyboard-focus"),e.target.setAttribute("aria-expanded","true")))}},goToSubmenuHeading:function(e,t){var i;(t||27===e.keyCode)&&(t||this.clearKeyboardFocus(),e.target.hasClass("gn-submenu")?i=e.target.previous("a"):e.target.ancestor("ul.gn-submenu")&&(i=e.target.ancestor("ul.gn-submenu").previous("a")),i&&i.focus())},keyboardNavigation:function(e){var t=e.keyCode,i=9===t&&e.shiftKey,n=9===t&&!e.shiftKey;e.target.hasClass("gn-title")?(i=(37===t||i)&&e.target.ancestor("li").previous("li"),n=(39===t||n)&&!!e.target.ancestor("li").next("li"),i?(this.clearKeyboardFocus(),this.focusOnPreviousItem(e)):!n||e.target.next("ul")&&e.target.next("ul").hasClass("has-keyboard-focus")||(this.clearKeyboardFocus(),this.focusOnNextItem(e))):38===t||i?this.focusOnPreviousItem(e):(40===t||n)&&this.focusOnNextItem(e)},focusOnPreviousItem:function(e){e.preventDefault();var t=e.target.ancestor("li").previous("li:not(.divider)");t?t.one(":first-child").focus():e.target.ancestor("ul.gn-submenu")&&this.goToSubmenuHeading(e,!0)},focusOnNextItem:function(e){e.preventDefault();var t=e.target.ancestor("li").next("li:not(.divider)");t&&t.one(":first-child").focus()},startInterstitialTimer:function(){var t,i=this,n=!1;(t=e.StorageHelper.getItem("signUpInterstitialSeen"))?(t=e.moment(t,"x"),e.moment().subtract(2,"days")>t&&(n=!0)):n=!0,n&&(this.signUpInterstitialTimer=setTimeout(function(){if(!e.OverlayManager.hasOverlay()&&e.config.win.innerWidth>700){new e.Views.SignUpInterstitial({appContext:i.appContext}).show(),e.StorageHelper.setItem("signUpInterstitialSeen",e.moment().format("x"))}},4e3))},signUpAndUpload:function(t){var i,n=e.url("/upload/"),o=this.intlMessage({intlName:"global-nav.UPLOAD_MODAL_SIGNUP_TITLE"});t.halt(),e.rapidTracker.beacon(this.name,"uploadButtonClick"),(i=new e.Views.SignUpModal({appContext:this.appContext,signUpHeaderClass:"signup-upload",signUpTitle:o,beaconPrefix:"upload"})).on("signUpClick",function(t){e.SigninHelper._redirectToSignUp("upload",{postLoginUrl:n})}),i.on("signInClick",function(t){e.SigninHelper._redirectToSignin("upload",{postLoginUrl:n})}),i.show()},executeSearch:function(e){var t,i=this.get("container").one("#gn-search-field").getDOMNode();t=this.searchUrl.createNewSearch(i.value).getURL(),e.halt(),this.appContext.flapp.navigate(t)},setElementStates:function(e){var t=this.appContext.getViewer(),i=e.isSOHP&&!t.signedIn,n=e.isProPage,o={you_link:!1,you_menu:!1,contacts_menu:!1,groups_menu:!1,explore_menu:!1,weekly_flickr:!1,flickr_shorts:!1,get_pro_link:!0,upload_icon:!1,account_menu:!1,search_bar:!1,signup_link:!1,signin_link:!1,right_side_signup:!1,vr_link:!0,sidebar_signin_link:!1};return i?(o.search_bar=!0,o.signin_link=!0,o.signup_link=!0,o.get_pro_link=!1):n?(o.you_menu=!1,o.explore_menu=!1,o.upload_icon=!1,o.search_bar=!1,o.account_menu=!0,o.get_pro_link=!1):t.signedIn?(o.you_menu=!0,o.explore_menu=!0,o.upload_icon=!0,o.search_bar=!0,o.account_menu=!0):(o.signup_link=!0,o.explore_menu=!0,o.upload_icon=!0,o.search_bar=!0,o.signin_link=!0),this.get("viewer")&&this.get("viewer").getValue("isPro")&&(o.stats=!0,o.get_pro_link=!1),"en-us"===this.appContext.lang.toLowerCase()&&(o.weekly_flickr=!0,o.flickr_shorts=!0),this.signedOutTest&&(o.right_side_signup=!0),n||i||(o.prints_menu=!0),this.appContext.flipper.isFlipped("enable-events-page")&&(o.events_link=!0,o.weekly_flickr=!1,o.vr_link=!1),this.isSOHP||t.signedIn||(o.sidebar_signin_link=!0),o},isExpiringPartnerAccount:function(){var e=this.get("viewer").getValue("expiringPartner");return this.appContext.flipper.isFlipped("enable-partner-account-banner")&&e&&-1===["embedr-route","browser-upgrade-interstitial-route","products-marketplace-eol-route","products-account-payouts-route","error-route"].indexOf(this.appContext.routeConfig.module)},handleToastActionClick:function(t){var i=t&&t.clickEvent?t.clickEvent.target.getAttribute("href"):null;i?e.config.win.location.href=i:this.toastSubview.dismiss()},setProRedirectCookie:function(){var t=new Date;t.setTime(t.getTime()+60*e.config.flickr.upload_blocking.photo_limit_pro_redir_cookie_hours*60*1e3),this.appContext.setCookie({cookieName:e.config.flickr.upload_blocking.photo_limit_pro_redir_cookie_name,cookieValue:1,expires:t,path:"/"})},showOverLimitToast:function(){this.toastSubview&&this.appContext.flipper.isFlipped("enable-upload-limit-messages")&&e.UserLimitsHelper.isOverARRLimit(this.profileModel,this.appContext)&&(this.toastSubview.setup({htmlContent:this.templates("upload-limit-message")({title:this.intlMessage({intlName:"upload-blocking.OVER_UPLOAD_LIMIT_HEAD_FINAL"}),description:this.intlMessage({intlName:"upload-blocking.OVER_UPLOAD_LIMIT_COPY_FINAL",limitCount:e.config.flickr.account.photo_limit.toLocaleString(this.appContext.lang,{maximumFractionDigits:0})}),primaryActionText:this.intlMessage({intlName:"common.GET_PRO"}),secondaryActionText:this.intlMessage({intlName:"common.DISMISS"})}),classList:["urgent"]}),this.toastSubview.on("primaryActionClicked",this.handleToastActionClick.bind(this)),this.toastSubview.on("secondaryActionClicked",this.handleToastActionClick.bind(this)),this.toastSubview.show())},handlePrintClick:function(){"en-us"===this.appContext.lang.toLowerCase()?this.appContext.getCookie(e.config.flickr.flickrprints.dismiss_intro_to_prints_cookie_name)?this.showPrintSelector():this.showIntroToPrintsModal():this.showEnglishPrintWarningModal()},showPrintSelector:function(){var t=this,i=this.intlMessage({intlName:"prints.CHOOSE_PHOTO_TO_GET_PRINTS"}),n=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"},{id:"upload",name:this.intlMessage({intlName:"global-nav.UPLOAD"}),value:"upload"}],o=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"},{id:"upload",name:this.intlMessage({intlName:"global-nav.UPLOAD"}),value:"upload"}],r=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"}],a={appContext:this.appContext,searchable:{yours:!0,contacts:!1,everyone:!1,marketplace:!1}};this.printSelector=new e.Views["photo-selector-view"](a),this.printSelectorModal=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!1,showBodyLines:!0,showCancelButton:!1,showCancelX:!0,title:"",navBarView:new e.Views["fluid-modal-nav-bar-view"]({appContext:this.appContext,links:n,enableSearch:!0,breakpointConfig:[{maxWidth:700,links:o,enableSearch:!1},{maxWidth:500,links:r,enableSearch:!1}]}),actionButtonLabel:this.intlMessage({intlName:"prints.BUY_PRINTS"}),actionButtonDisabled:!0,subview:this.printSelector,width:Math.round(.8*Math.max(1280,e.config.win.innerWidth)),height:Math.round(e.config.win.innerHeight-60),fullWindow:!0,classList:"photo-selector",hideModalOverlay:!1,buttonFlavorText:i,flexLayout:!0}),this.printSelectorModal.show(),this.printSelectorModal.registerEventHandler(e.on("photoSelector:selected",function(e){t.printSelectorModal.enableActionButton(),t.printSelectorModal.setFlavorText(i)})),this.printSelectorModal.registerEventHandler(e.on("photoSelector:unselected",function(e){t.printSelectorModal.disableActionButton()})),this.printSelectorModal.on("actionClick",this.handleBuyPrintClick.bind(t))},handleBuyPrintClick:function(){var t=this,i=this.printSelector.get("selected");e.config.win.location.href;this.printSelectorModal.disableActionButton(!0),this.appContext.getModel("photo-models",i).then(function(i){return t.photoPrintsHelper.canPrintPhoto(i)?t.photoPrintsHelper.registerPrint(i,e.config.win.location.href):e.Promise.reject({message:"Error: Can’t print photo."})}).then(function(t){e.config.win.location.href=t.redirectURL}).catch(function(e){t.printSelectorModal.enableActionButton(),t.printSelectorModal.setFlavorText(e.message||t.intlMessage({intlName:"prints.SOMETHING_WRONG_PREPARING_PRINT"}),!0)})},showEnglishPrintWarningModal:function(t){var i=this;this.englishPrintWarningModal=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!1,showActionButton:!0,actionButtonLabel:this.intlMessage({intlName:"prints.CONTINUE_IN_ENGLISH"}),showCancelButton:!0,cancelButtonLabel:"en-us"===this.appContext.lang.toLowerCase()?this.intlMessage({intlName:"common.GO_BACK_BUTTON"}):this.intlMessage({intlName:"common.CANCEL"}),showCancelX:!1,showHeader:!0,showFooter:!0,title:this.intlMessage({intlName:"prints.ENGLISH_LANGUAGE_AHEAD"}),message:this.intlMessage({intlName:"prints.ORDERING_IS_ENGLISH_ONLY"}),hideModalOverlay:!1}),this.englishPrintWarningModal.show(),this.englishPrintWarningModal.on("actionClick",function(){setTimeout(function(){i.appContext.getCookie(e.config.flickr.flickrprints.dismiss_intro_to_prints_cookie_name)?i.showPrintSelector():i.showIntroToPrintsModal()},0)}),this.englishPrintWarningModal.on("close",function(){})},handleDrawerPageMouseDown:function(e){var t=e.target;t.ancestor(".mobile-nav-drawer",!0)||t.ancestor(".mobile-nav-toggle",!0)||this.hideMobileNavDrawer()},handleDrawerItemClick:function(e){this.hideMobileNavDrawer()},showMobileNavDrawer:function(){var t=this;this.get("container");this.contentContainer.addClass("drawer-open"),this.navDrawerShown=!0,this.navDrawer.addClass("shown"),e.fire("globalNav:navDrawerOpen"),clearTimeout(this.navDrawerOverlayHideTimeout),this.navDrawerOverlay&&(this.navDrawerOverlay.addClass("displayed"),setTimeout(function(){t.navDrawerOverlay.addClass("shown")},10)),this.drawerPageClickHandler||setTimeout(function(){t.drawerPageClickHandler=e.on(["mousedown","touchstart"],t.handleDrawerPageMouseDown.bind(t)),t.registerEventHandler(t.drawerPageClickHandler)},10)},hideMobileNavDrawer:function(){var t=this;this.get("container");this.contentContainer.removeClass("drawer-open"),this.navDrawerShown=!1,this.navDrawer.removeClass("shown"),e.fire("globalNav:navDrawerClosed"),this.navDrawerOverlay&&(this.navDrawerOverlay.removeClass("shown"),this.navDrawerOverlayHideTimeout=setTimeout(function(){t.navDrawerOverlay.removeClass("displayed")},500)),this.drawerPageClickHandler&&(this.detachRegisteredEvent(this.drawerPageClickHandler),this.drawerPageClickHandler=void 0)},prepareOrderConfirmationModal:function(){var t,i=this,n=e.QueryString.parse(e.config.win.location.search.replace("?",""));e.config.win.location.href;this.photoPrintsHelper.isPrintsEnabled()&&n&&void 0!==n.OrderID&&(t=n.OrderID,this.photoPrintsHelper.fetchOrder(t).then(function(e){i.showOrderConfirmationModal({orderId:e.orderId,orderUrl:e.orderUrl,email:e.email})}).catch(function(e){i.showOrderConfirmationModal({})}))},showOrderConfirmationModal:function(t){var i=this,n=this.templates("print-order-confirmation")({orderNum:t.orderId,orderUrl:t.orderUrl,email:t.email,helpUrl:"https://help.flickr.com/",feedbackUrl:"/help/forum"}),o=new e.Views.FluidModal({appContext:this.appContext,noScroll:!0,hideModalOverlay:!1,maxHeight:!1,showHeader:!1,showFooter:!1,showCancelX:!1,width:460,htmlMessage:n});o.show(),o.on("activated",function(){i.registerEventHandler(o.get("container").one("button.accept-button").on("click",function(){o.close()}))})},showIntroToPrintsModal:function(){var t=this,i=this.templates("intro-to-prints")({}),n=new e.Views.FluidModal({appContext:this.appContext,noScroll:!0,hideModalOverlay:!1,dismissOnOverlayClick:!0,maxHeight:!1,showHeader:!1,showFooter:!1,width:450,contentPadding:0,showCancelX:!0,htmlMessage:i});n.show(),n.on("activated",function(){n.get("container").one(".accept-button").on("click",function(e){n.close()})}),n.on("close",function(){var i=new Date;i.setTime(i.getTime()+36e10),t.appContext.setCookie({cookieName:e.config.flickr.flickrprints.dismiss_intro_to_prints_cookie_name,cookieValue:1,expires:i,path:"/"}),setTimeout(function(){t.showPrintSelector()},0)})},destructor:function(){clearTimeout(this.signUpInterstitialTimer),e.AnchorRepositioner.removeOffset(t)}})},"@VERSION@",{requires:["flickr-view","hermes-template-global-nav","hermes-template-feedback-modal-view","hermes-template-upload-limit-message","hermes-template-print-order-confirmation","hermes-template-intro-to-prints","search-url","search-autosuggest-field-view","querystring-parse-simple","querystring-stringify-simple","notifications-menu-view","url-helper","person-menu-view","group-menu-view","browser-support","fluid-modal-view","signup-modal-view","signup-interstitial-view","signin-helper","storage-helper","partner-account-banner-view","featured-toast-view","user-limits-helper","photo-selector-view","fluid-modal-nav-bar-view","banner-view","photo-prints-helper","math-helper","slim-footer-view"],langBundles:["global-nav","common","search","upload-blocking","prints","blurb","thanks"]});