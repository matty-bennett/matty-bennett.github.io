YUI.add("hermes-template-notif-item-group-photo-request",function(t,n){var e=t.Template.Handlebars.revive({1:function(t,n,e,a,i){var o;return'\t\t\t\t<div class="thumb-container">\n'+(null!=(o=t.invokePartial(a["notification-photo-thumb"],n,{name:"notification-photo-thumb",hash:{photo:null!=n?n.photo:n},data:i,indent:"\t\t\t\t\t",helpers:e,partials:a,decorators:t.decorators}))?o:"")+"\t\t\t\t</div>\n"},3:function(t,n,e,a,i){var o=null!=n?n:{},s=e.helperMissing,l=t.escapeExpression;return'\t\t\t<div class="group-photo-request-actions">\n\t\t\t\t<button type="button" class="butt flex hollow mini alt decline">'+l((e.intlMessage||n&&n.intlMessage||s).call(o,{name:"intlMessage",hash:{intlName:"group-admin.DENY"},data:i}))+'</button>\n\t\t\t\t<button type="button" class="butt flex hollow mini accept">'+l((e.intlMessage||n&&n.intlMessage||s).call(o,{name:"intlMessage",hash:{intlName:"group-admin.APPROVE"},data:i}))+"</button>\n\t\t\t</div>\n"},compiler:[7,">= 4.0.0"],main:function(t,n,e,a,i){var o,s=null!=n?n:{},l=e.helperMissing,r=t.escapeExpression;return'<div class="notification-item notif-item-group-photo-request">\n'+(null!=(o=t.invokePartial(a["notification-avatar"],n,{name:"notification-avatar",hash:{data:null!=n?n.avatarData:n},data:i,indent:"\t",helpers:e,partials:a,decorators:t.decorators}))?o:"")+'\n\t<div class="notification-item-content-wrapper">\n\t\t<div class="notification-item-middle">\n'+(null!=(o=t.invokePartial(a["notification-core"],n,{name:"notification-core",hash:{timestamp:null!=n?n.timestamp:n,subtitle:null!=n?n.subtitle:n,headline:null!=n?n.headline:n},data:i,indent:"\t\t\t",helpers:e,partials:a,decorators:t.decorators}))?o:"")+"\n"+(null!=(o=e.if.call(s,null!=n?n.photo:n,{name:"if",hash:{},fn:t.program(1,i,0),inverse:t.noop,data:i}))?o:"")+"\t\t</div>\n\n"+(null!=(o=e.if.call(s,null!=n?n.showButtons:n,{name:"if",hash:{},fn:t.program(3,i,0),inverse:t.noop,data:i}))?o:"")+'\n\t\t<div class="group-photo-request-actions">\n\t\t\t<div class="action-message accepted-message hidden">\n\t\t\t\t<svg class="icon icon-check"><use xlink:href="#icon-check"></use></svg>\n\t\t\t\t<span class="message">'+r((e.intlMessage||n&&n.intlMessage||l).call(s,{name:"intlMessage",hash:{intlName:"notifications.GROUP_ADMIN_PHOTO_REQUEST_APPROVED"},data:i}))+'</span>\n\t\t\t</div>\n\t\t\t<div class="action-message declined-message hidden">\n\t\t\t\t<svg class="icon icon-close"><use xlink:href="#icon-close"></use></svg>\n\t\t\t\t<span class="message">'+r((e.intlMessage||n&&n.intlMessage||l).call(s,{name:"intlMessage",hash:{intlName:"notifications.GROUP_ADMIN_PHOTO_REQUEST_DENIED"},data:i}))+'</span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="context-menu-container">\n'+(null!=(o=t.invokePartial(a["notification-context-menu-button"],n,{name:"notification-context-menu-button",data:i,indent:"\t\t",helpers:e,partials:a,decorators:t.decorators}))?o:"")+"\t</div>\n</div>\n"},usePartial:!0,useData:!0}),a={};t.Array.each(["notification-avatar","notification-core","notification-photo-thumb","notification-context-menu-button"],function(n){var e=t.Template.get("hermes/"+n);e&&(a[n]=e)}),t.Template.register("hermes/notif-item-group-photo-request",function(n,i){return i=i||{},i.partials=i.partials?t.merge(a,i.partials):a,e(n,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-avatar","hermes-template-notification-core","hermes-template-notification-photo-thumb","hermes-template-notification-context-menu-button"]});YUI.add("hermes-template-notif-item-comment-after-your-comment",function(t,a){var e=t.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(t,a,e,n,i){var o;return'<div class="notification-item notif-item-comment-after-your-comment">\n'+(null!=(o=t.invokePartial(n["notification-avatar"],a,{name:"notification-avatar",hash:{data:null!=a?a.avatarData:a},data:i,indent:"\t",helpers:e,partials:n,decorators:t.decorators}))?o:"")+'\n\t<div class="notification-item-middle">\n'+(null!=(o=t.invokePartial(n["notification-core"],a,{name:"notification-core",hash:{timestamp:null!=a?a.timestamp:a,subtitle:null!=a?a.subtitle:a,headline:null!=a?a.headline:a},data:i,indent:"\t\t",helpers:e,partials:n,decorators:t.decorators}))?o:"")+'\t</div>\n\n\t<div class="thumb-container">\n'+(null!=(o=t.invokePartial(n["notification-photo-thumb"],a,{name:"notification-photo-thumb",hash:{photo:null!=a?a.photo:a},data:i,indent:"\t\t",helpers:e,partials:n,decorators:t.decorators}))?o:"")+'\t</div>\n\n\t<div class="context-menu-container">\n'+(null!=(o=t.invokePartial(n["notification-context-menu-button"],a,{name:"notification-context-menu-button",data:i,indent:"\t\t",helpers:e,partials:n,decorators:t.decorators}))?o:"")+"\t</div>\n</div>\n"},usePartial:!0,useData:!0}),n={};t.Array.each(["notification-avatar","notification-core","notification-photo-thumb","notification-context-menu-button"],function(a){var e=t.Template.get("hermes/"+a);e&&(n[a]=e)}),t.Template.register("hermes/notif-item-comment-after-your-comment",function(a,i){return i=i||{},i.partials=i.partials?t.merge(n,i.partials):n,e(a,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-avatar","hermes-template-notification-core","hermes-template-notification-photo-thumb","hermes-template-notification-context-menu-button"]});YUI.add("hermes-template-notif-item-group-cover-photo",function(t,a){var e=t.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(t,a,e,n,i){var o;return'\n<div class="notification-item notif-item-group-cover-photo">\n'+(null!=(o=t.invokePartial(n["notification-avatar"],a,{name:"notification-avatar",hash:{data:null!=a?a.avatarData:a},data:i,indent:"\t",helpers:e,partials:n,decorators:t.decorators}))?o:"")+'\n\t<div class="notification-item-middle">\n'+(null!=(o=t.invokePartial(n["notification-core"],a,{name:"notification-core",hash:{timestamp:null!=a?a.timestamp:a,subtitle:null!=a?a.subtitle:a,headline:null!=a?a.headline:a},data:i,indent:"\t\t",helpers:e,partials:n,decorators:t.decorators}))?o:"")+'\t</div>\n\n\t<div class="thumb-container">\n'+(null!=(o=t.invokePartial(n["notification-photo-thumb"],a,{name:"notification-photo-thumb",hash:{photo:null!=a?a.photo:a},data:i,indent:"\t\t",helpers:e,partials:n,decorators:t.decorators}))?o:"")+'\t</div>\n\n\t<div class="context-menu-container">\n'+(null!=(o=t.invokePartial(n["notification-context-menu-button"],a,{name:"notification-context-menu-button",data:i,indent:"\t\t",helpers:e,partials:n,decorators:t.decorators}))?o:"")+"\t</div>\n</div>\n"},usePartial:!0,useData:!0}),n={};t.Array.each(["notification-avatar","notification-core","notification-photo-thumb","notification-context-menu-button"],function(a){var e=t.Template.get("hermes/"+a);e&&(n[a]=e)}),t.Template.register("hermes/notif-item-group-cover-photo",function(a,i){return i=i||{},i.partials=i.partials?t.merge(n,i.partials):n,e(a,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-avatar","hermes-template-notification-core","hermes-template-notification-photo-thumb","hermes-template-notification-context-menu-button"]});YUI.add("hermes-template-notif-item-group-join-request-accepted",function(t,e){var a=t.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(t,e,a,i,n){var o;return'<div class="notification-item notif-item-group-join-request-accepted">\n'+(null!=(o=t.invokePartial(i["notification-avatar"],e,{name:"notification-avatar",hash:{data:null!=e?e.avatarData:e},data:n,indent:"\t",helpers:a,partials:i,decorators:t.decorators}))?o:"")+'\n\t<div class="notification-item-middle">\n'+(null!=(o=t.invokePartial(i["notification-core"],e,{name:"notification-core",hash:{timestamp:null!=e?e.timestamp:e,subtitle:null!=e?e.subtitle:e,headline:null!=e?e.headline:e},data:n,indent:"\t\t",helpers:a,partials:i,decorators:t.decorators}))?o:"")+'\t</div>\n\n\t<div class="context-menu-container">\n'+(null!=(o=t.invokePartial(i["notification-context-menu-button"],e,{name:"notification-context-menu-button",data:n,indent:"\t\t",helpers:a,partials:i,decorators:t.decorators}))?o:"")+"\t</div>\n</div>\n"},usePartial:!0,useData:!0}),i={};t.Array.each(["notification-avatar","notification-core","notification-context-menu-button"],function(e){var a=t.Template.get("hermes/"+e);a&&(i[e]=a)}),t.Template.register("hermes/notif-item-group-join-request-accepted",function(e,n){return n=n||{},n.partials=n.partials?t.merge(i,n.partials):i,a(e,n)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-avatar","hermes-template-notification-core","hermes-template-notification-context-menu-button"]});YUI.add("notifications-helper",function(t,e){var n=require("hermes-core/flog")(e),i=t.mix({langBundles:["common","notifications","relative-dates","profile","photo-card","header","group-admin","settings-notifications"]},t.Localizable),o={fave:"notif-item-fave",comment:"notif-item-comment",reply_reply:"notif-item-reply-reply",group_topic_new:"notif-item-group-topic-new",contacted:"notif-item-contacted",group_invite:"notif-item-group-invite",note:"notif-item-note",tag:"notif-item-tag",people:"notif-item-people",testimonial:"notif-item-testimonial",group_user_invite:"notif-item-group-user-invite",flickrmail:"notif-item-flickrmail",photo_comment_mention:"notif-item-photo-comment-mention",gallery:"notif-item-gallery",gallery_comment:"notif-item-gallery-comment",share:"notif-item-share",photo_accepted:"notif-item-photo-accepted",photo_declined:"notif-item-photo-declined",photo_mention:"notif-item-photo-mention",group_blast:"notif-item-group-blast",group_rules:"notif-item-group-rules",group_description:"notif-item-group-description",group_photo_request:"notif-item-group-photo-request",group_join_request:"notif-item-group-join-request",upload:"notif-item-upload",photo_bot_moderated:"notif-item-moderated",comment_after_your_comment:"notif-item-comment-after-your-comment",group_cover_photo:"notif-item-group-cover-photo",group_join_request_accepted:"notif-item-group-join-request-accepted"},a=50;t.NotificationsHelper=function(e,l){function r(t){var e=t.getSizeToFit({width:a,height:a},{sizes:t.getValue("sizes"),cropToFit:!0,includeSquare:!0});return{id:t.getValue("id"),url:t.getValue("url"),displayUrl:e.displayUrl}}function u(e){var n=[],i=[],o=[],a=[],l={},r=[];return e.activityData.users&&(e.activityData.users.forEach(function(t){i.push(f.person.extractEntityModel(t))}),n.push(t.Promise.all(i).then(function(t){return a=t,t}))),Object.keys(f).forEach(function(t){e.activityData[t]&&n.push(f[t].extractEntityModel(e.activityData[t]).then(function(e){return l[t]=e,e}))}),e.eventDataList.forEach(function(e){var n=[],i={};Object.keys(f).forEach(function(t){e[t]&&n.push(f[t].extractEntityModel(e[t]).then(function(e){return i[t]=e,e}))}),o.push(t.Promise.all(n).then(function(){return i}))}),n.push(t.Promise.all(o).then(function(t){return r=t,t})),t.Promise.all(n).then(function(){return{userModels:a,activityEntityModels:l,eventEntityModelsList:r}})}function s(t,e){return t.setValue("isContact",e),t.remoteUpdate().catch(function(e){t.setValue("isContact",!1),n.error({err:e})})}function c(e,i){return e.setValue("isIgnored",i),i&&e.setValue("isContact",!1),e.remoteUpdate().then(function(){i&&t.fire("notifications:userBlocked",{relationshipModel:e,isBlocked:i})}).catch(function(t){e.setValue("isContact",!1),n.error({err:t})})}function p(t,e){return t.length>30?t.substring(0,e)+"â€¦":t}function g(e,n,i){t.Analytics.setDataLayerProp("notifications.notificationType",e.type),t.Analytics.setDataLayerProp("notifications.actionType","Context Menu Action: "+n),t.Analytics.setDataLayerProp("notifications.location",i),t.Analytics.sendClick("","Notification Action"),t.Analytics.setDataLayerProp("notifications.notificationType",""),t.Analytics.setDataLayerProp("notifications.actionType",""),t.Analytics.setDataLayerProp("notifications.location","")}var m,f,d,y=new t.TemplateLibraryHelper(e,{localizeLib:i});f={photo:{extractEntityModel:function(n){return t.FlickrPromise({photoModelRegistry:e.getModelRegistry("photo-models"),personModelRegistry:e.getModelRegistry("person-models"),photoEngagementModelRegistry:e.getModelRegistry("photo-engagement-models"),photoStatsRegistry:e.getModelRegistry("photo-stats-models")}).then(function(e){var i=t.clone(n);if(i.title){var o=i.title.content||i.title._content;i.title=o}return t.APIHelper.response.parsePhotos({photos:[i],photoModelRegistry:e.photoModelRegistry,personModelRegistry:e.personModelRegistry,photoEngagementModelRegistry:e.photoEngagementModelRegistry,photoStatsModelRegistry:e.photoStatsRegistry}).shift()})}},set:{extractEntityModel:function(e){return t.Promise.resolve(e)}},gallery:{extractEntityModel:function(n){return t.FlickrPromise({personModelRegistry:e.getModelRegistry("person-models"),galleryInfoModelRegistry:e.getModelRegistry("gallery-models")}).then(function(e){var i,o,a=n.coverPhotos||[];return n.owner.nsid=n.owner.user,i=e.personModelRegistry.addOrUpdate(t.APIHelper.response.parsePerson(n.owner)),n.owner=i,a.forEach(function(e){e.url=t.APIHelper.response.removeProtocolFromURL(e.url)}),o={id:n.galleryId,compoundId:n.id,title:n.title.content,description:n.description.content,owner:i,primary:n.primaryPhotoId,primaryPhotoSizes:t.APIHelper.response.parsePrimaryPhotoSizes(n),photoCount:n.countPhotos,videoCount:n.countVideos,viewCount:n.countViews,commentCount:n.countComments,coverPhotosData:a},e.galleryInfoModelRegistry.addOrUpdate(o)})}},person:{extractEntityModel:function(i){return t.FlickrPromise({personModelRegistry:e.getModelRegistry("person-models")}).then(function(e){var n=i;return e.personModelRegistry.addOrUpdate(t.APIHelper.response.parsePerson({nsid:n.user,pathAlias:n.pathAlias,username:n.username,realname:n.realname,isAdFree:n.isAdFree,ispro:n.ispro,proBadge:n.proBadge,datecreate:n.datecreate,iconurls:n.iconurls}))}).catch(function(t){n.error("error getting person model")})}},addedPerson:{extractEntityModel:function(t){return f.person.extractEntityModel(t)}},flickrmail:{extractEntityModel:function(n){return t.FlickrPromise({flickrMailModelRegistry:e.getModelRegistry("notification-flickrmail-models")}).then(function(t){return t.flickrMailModelRegistry.addOrUpdate(t.flickrMailModelRegistry.parseFlickrMailModel(n))})}},group:{extractEntityModel:function(n){return t.FlickrPromise({groupModelRegistry:e.getModelRegistry("group-models")}).then(function(t){return t.groupModelRegistry.addOrUpdate(t.groupModelRegistry.parseGroupModel(n.id,n.pathAlias,n))})}},discussion:{extractEntityModel:function(n){return t.FlickrPromise({groupModelRegistry:e.getModelRegistry("group-models"),discussionModelRegistry:e.getModelRegistry("notification-group-discussion-models")}).then(function(e){var i,o;return o=t.clone(n),o.id=n.group_id,o.title=n.group_name,i=e.groupModelRegistry.addOrUpdate(e.groupModelRegistry.parseGroupModel(n.group_id,n.pathAlias,o)),e.discussionModelRegistry.add(e.discussionModelRegistry.parseDiscussionModel(n.id,n.pathAlias,n,i))})}},testimonial:{extractEntityModel:function(e){return t.Promise.resolve(e)}}},d={sendMessage:function(e,n){var o;return{load:function(){return o=e.userModels[0],t.Promise.resolve()},getConfig:function(){return{actionId:"sendMessage",text:i.intlMessage({intlName:"photo-card.SEND_A_MESSAGE"}),onSelected:function(n){g(e,"sendMessage",n.analyticsLocation),t.config.win.open(t.URLHelper.generatePersonUrls(o).sendFlickrMail,"_blank")}}}}},follow:function(t,o){var a,l;return{load:function(){return a=t.userModels[0],e.getModel("person-relationship-models",t.userModels[0].getValue("nsid")).then(function(t){l=t}).catch(function(t){n.error("error getting person-relationship model")})},getConfig:function(){var e;if(!l.getValue("isIgnored"))return l.getValue("isContact")?(e="unfollowOwner",{actionId:e,text:i.intlHTMLMessage({intlName:"photo-card.UNFOLLOW_USER",username:a.getValue("displayname")}),onSelected:function(n){g(t,e,n.analyticsLocation),s(l,!1)}}):(e="followOwner",{actionId:e,text:i.intlHTMLMessage({intlName:"photo-card.FOLLOW_USER",username:a.getValue("displayname")}),onSelected:function(n){g(t,e,n.analyticsLocation),s(l,!0)}})}}},block:function(n,o){var a,l;return{load:function(){return a=n.userModels[0],e.getModel("person-relationship-models",n.userModels[0].getValue("nsid")).then(function(t){l=t})},getConfig:function(){var o;return l.getValue("isIgnored")?(o="unblockOwner",{actionId:o,text:i.intlHTMLMessage({intlName:"photo-card.UNBLOCK_USER",username:a.getValue("displayname")}),onSelected:function(t){g(n,o,t.analyticsLocation),c(l,!1)}}):(o="blockOwner",{actionId:o,text:i.intlHTMLMessage({intlName:"photo-card.BLOCK_USER",username:n.userModels[0].getValue("displayname")}),onSelected:function(r){g(n,o,r.analyticsLocation),(function(n,o){var a=new t.Views.FluidModal({appContext:e,title:i.intlHTMLMessage({intlName:"photo-card.BLOCK_USER_QUESTION",username:o}),message:"<p>"+i.intlMessage({intlName:"photo-card.BLOCK_CONFIRM_MESSAGE"})+"</p><p>"+i.intlHTMLMessage({intlName:"photo-card.BLOCK_CONFIRM_MESSAGE_NOTE"})+"</p>",actionButtonIsDangerous:!0,actionButtonLabel:i.intlMessage({intlName:"header.BLOCK"}),overlayClassList:"over-droparound-under-modal"});a.show(),a.on("actionClick",function(){c(n,!0)})})(l,a.getValue("displayname"))}})}}},joinGroup:function(n,o){var a;return{load:function(){var i=(n.activityData.photo?n.eventEntityModelsList[0].group:n.activityEntityModels.group).getValue("id");return(a=new t.GroupStatusHelper(e,{groupId:i})).load()},getConfig:function(){var t,e=a.getInfo();return e.joinStatus.canJoin?(t="joinGroup",{actionId:t,text:i.intlMessage({intlName:"photo-card.JOIN_GROUP"}),onSelected:function(e){if(a.getInfo().groupAttrs.id)return g(n,t,e.analyticsLocation),a.initiateJoinGroup()}}):e.groupAttrs.isMember?(t="leaveGroup",{actionId:t,text:i.intlMessage({intlName:"photo-card.LEAVE_GROUP"}),onSelected:function(i){if(e.groupAttrs.id)return g(n,t,i.analyticsLocation),a.initiateLeaveGroup()}}):void 0}}},muteNotification:function(o,a){return{load:function(){return t.Promise.resolve()},getConfig:function(){var a;return o.isMuted?(a="unmuteNotification",{actionId:a,text:i.intlMessage({intlName:"notifications.UNMUTE_THIS_NOTIFICATION"}),onSelected:function(i){var l={id:o.id};return g(o,a,i.analyticsLocation),e.callAPI("flickr.activity.unmuteNotification",l).then(function(e){o.isMuted=!1,t.fire("notifications:notificationMuteToggled",{activityItem:o,isMuted:!1})}).catch(function(t){n.error("Failed to unmute notificaiton: ",{err:t})})}}):(a="muteNotification",{actionId:a,text:i.intlMessage({intlName:"notifications.MUTE_THIS_NOTIFICATION"}),onSelected:function(i){var l={id:o.id,mute_after:o.timestamp};return g(o,a,i.analyticsLocation),e.callAPI("flickr.activity.muteNotification",l).then(function(e){o.isMuted=!0,t.fire("notifications:notificationMuteToggled",{activityItem:o,isMuted:!0})}).catch(function(t){n.error("Failed to mute notificaiton: ",{err:t})})}})}}}};var h={all:{additionalApiParams:{notificationGroups:"default,hermes_2020,bot_moderation"},menuItemConfig:{actionId:"all",text:i.intlMessage({intlName:"notifications.NOTIF_FILTER_ALL"})}},comments:{additionalApiParams:{notificationGroups:"comments"},menuItemConfig:{actionId:"comments",text:i.intlMessage({intlName:"notifications.NOTIF_FILTER_COMMENTS"})}},faves:{additionalApiParams:{notificationGroups:"faves"},menuItemConfig:{actionId:"faves",text:i.intlMessage({intlName:"notifications.NOTIF_FILTER_FAVES"})}},followers:{additionalApiParams:{notificationGroups:"followers"},menuItemConfig:{actionId:"followers",text:i.intlMessage({intlName:"notifications.NOTIF_FILTER_FOLLOWERS"})}},galleries:{additionalApiParams:{notificationGroups:"galleries"},menuItemConfig:{actionId:"galleries",text:i.intlMessage({intlName:"notifications.NOTIF_FILTER_GALLERIES"})}},groups:{additionalApiParams:{notificationGroups:"groups"},menuItemConfig:{actionId:"groups",text:i.intlMessage({intlName:"notifications.NOTIF_FILTER_GROUPS"})}},groupInvites:{additionalApiParams:{notificationGroups:"group_invites"},menuItemConfig:{actionId:"groupInvites",text:i.intlMessage({intlName:"settings-notifications.GROUP_INVITATIONS"})}},flickrmail:{additionalApiParams:{notificationGroups:"flickrmail"},menuItemConfig:{actionId:"flickrmail",text:i.intlMessage({intlName:"notifications.NOTIF_FILTER_FLICKRMAIL"})}},notes:{additionalApiParams:{notificationGroups:"notes"},menuItemConfig:{actionId:"notes",text:i.intlMessage({intlName:"notifications.NOTIF_FILTER_NOTES"})}},tags:{additionalApiParams:{notificationGroups:"tags"},menuItemConfig:{actionId:"tags",text:i.intlMessage({intlName:"notifications.NOTIF_FILTER_TAGS"})}},testimonials:{additionalApiParams:{notificationGroups:"testimonials"},menuItemConfig:{actionId:"testimonials",text:i.intlMessage({intlName:"notifications.NOTIF_FILTER_TESTIMONIALS"})}},muted:{additionalApiParams:{muteFilter:"muted",notificationGroups:"default,hermes_2020,bot_moderation"},menuItemConfig:{actionId:"muted",text:i.intlMessage({intlName:"notifications.NOTIF_FILTER_MUTED"})}},"groupsYouAdmin-all":{additionalApiParams:{notificationGroups:"groups_you_admin"},menuItemConfig:{actionId:"groupsYouAdmin-all",text:i.intlMessage({intlName:"notifications.NOTIF_FILTER_ADMIN_ALL_GROUPS"})}}};m={fave:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var o;if(n.activityData.photo){var a=n.activityEntityModels.photo,l=n.userModels,u=a.getValue("title").length>0;return o=n.activityData.countUsers>1?2===n.activityData.countUsers?u?i.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_FAVED_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),person2Name:l[1].getValue("displayname"),person2Url:l[1].getValue("url"),photoTitle:a.getValue("title"),photoUrl:a.getValue("url")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_FAVED_1_UNTITLED_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),person2Name:l[1].getValue("displayname"),person2Url:l[1].getValue("url"),mediaType:a.getValue("mediaType"),photoUrl:a.getValue("url")}):u?i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_FAVED_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),photoTitle:a.getValue("title"),photoUrl:a.getValue("url")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_FAVED_1_UNTITLED_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),mediaType:a.getValue("mediaType"),photoUrl:a.getValue("url")}):u?i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_FAVED_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),photoTitle:a.getValue("title"),photoUrl:a.getValue("url")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_FAVED_1_UNTITLED_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),mediaType:a.getValue("mediaType"),photoUrl:a.getValue("url")}),{headline:o,timestamp:n.timestamp,avatarData:{id:l[0].getValue("id"),type:"person",iconUrl:l[0].getValue("buddyicon").small,url:l[0].getValue("url")},photo:r(a)}}var s=n.userModels[0],c=n.eventEntityModelsList.map(function(t){return t.photo});return o=i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_FAVED_X_PHOTOS",personName:s.getValue("displayname"),personUrl:s.getValue("url"),photoCountString:n.activityData.countEvents,mediaType:c[0].getValue("mediaType")}),{headline:o,timestamp:n.timestamp,avatarData:{id:s.getValue("id"),type:"person",iconUrl:s.getValue("buddyicon").small,url:s.getValue("url")},photos:c.map(function(t){return r(t)}).slice(0,12),hasMultiplePhotos:c.length>1}},loadContextMenuConfig:function(e){var n,i=[],o=[];return n=e.activityData.photo?e.activityEntityModels.photo:e.eventEntityModelsList.map(function(t){return t.photo})[0],i.push(new d.muteNotification(e,{eventType:e.type,objectId:n.getValue("id")})),i.push(new d.sendMessage(e)),i.push(new d.follow(e)),i.push(new d.block(e)),i.forEach(function(t){o.push(t.load())}),t.Promise.all(o).then(function(){return i})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},comment:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var o;if(n.activityData.photo){var a=n.activityEntityModels.photo,l=n.userModels;return o=n.activityData.countUsers>1?2===n.activityData.countUsers?i.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_COMMENTED_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),person2Name:l[1].getValue("displayname"),person2Url:l[1].getValue("url"),photoTitle:a.getValue("title"),photoUrl:a.getValue("url")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENTED_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),photoTitle:a.getValue("title"),photoUrl:a.getValue("url")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_COMMENTED_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),commentUrl:a.getValue("url")+"/#comment"+n.eventDataList[0].commentid,commentContent:p(t.StringHelper.stripTags(n.eventDataList[0]._content),30)}),{headline:o,timestamp:n.timestamp,avatarData:{id:l[0].getValue("id"),type:"person",iconUrl:l[0].getValue("buddyicon").small,url:l[0].getValue("url")},photo:r(a)}}var u=n.userModels[0],s=n.eventEntityModelsList.map(function(t){return t.photo});return o=i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_COMMENTED_X_PHOTOS",personName:u.getValue("displayname"),personUrl:u.getValue("url"),photoCountString:n.activityData.countEvents,mediaType:s[0].getValue("mediaType")}),{headline:o,timestamp:n.timestamp,avatarData:{id:u.getValue("id"),type:"person",iconUrl:u.getValue("buddyicon").small,url:u.getValue("url")},photos:s.map(function(t){return r(t)}).slice(0,12),hasMultiplePhotos:s.length>1}},loadContextMenuConfig:function(e){var n,i=[],o=[];return n=e.activityData.photo?e.activityEntityModels.photo:e.eventEntityModelsList.map(function(t){return t.photo})[0],i.push(new d.muteNotification(e,{eventType:e.type,objectId:n.getValue("id")})),i.push(new d.sendMessage(e)),i.push(new d.follow(e)),i.push(new d.block(e)),i.forEach(function(t){o.push(t.load())}),t.Promise.all(o).then(function(){return i})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},reply_reply:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var o,a=n.activityEntityModels.group,l=n.userModels;return o=n.activityData.countUsers>1?2===n.activityData.countUsers?i.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_REPLIED_TO_TOPIC",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),person2Name:l[1].getValue("displayname"),person2Url:l[1].getValue("url"),topicName:p(t.StringHelper.stripTags(n.activityData.topic.name),30),topicUrl:a.getValue("urlDiscussionPage")+"/"+n.activityData.topic.id}):i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_REPLIED_TO_TOPIC",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),topicName:p(t.StringHelper.stripTags(n.activityData.topic.name),30),topicUrl:a.getValue("urlDiscussionPage")+"/"+n.activityData.topic.id}):i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_REPLIED_TO_TOPIC",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),topicName:p(t.StringHelper.stripTags(n.activityData.topic.name),30),topicUrl:a.getValue("urlDiscussionPage")+"/"+n.activityData.topic.id,replyContent:p(t.StringHelper.stripTags(n.eventDataList[0].content),30),replyUrl:a.getValue("urlDiscussionPage")+"/"+n.activityData.topic.id+"/"+n.eventDataList[0].replyId}),{headline:o,timestamp:n.timestamp,subtitle:t.flutil.unescape(a.getValue("title")),subtitleUrl:a.getValue("url"),avatarData:{id:l[0].getValue("id"),type:"person",iconUrl:l[0].getValue("buddyicon").small,url:l[0].getValue("url")}}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.group;return n.push(new d.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},group_topic_new:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var o,a=n.activityEntityModels.group,l=n.userModels;return o=n.activityData.countUsers>1?2===n.activityData.countUsers?i.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_CREATED_TOPICS",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),person2Name:l[1].getValue("displayname"),person2Url:l[1].getValue("url"),topicsUrl:a.getValue("urlDiscussionPage")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_CREATED_TOPICS",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),topicsUrl:a.getValue("urlDiscussionPage")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_CREATED_TOPIC",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),topicName:p(t.StringHelper.stripTags(n.activityData.topic.name),30),topicUrl:a.getValue("urlDiscussionPage")+"/"+n.activityData.topic.id}),{headline:o,timestamp:n.timestamp,subtitle:t.flutil.unescape(a.getValue("title")),subtitleUrl:a.getValue("url"),avatarData:{id:l[0].getValue("id"),type:"person",iconUrl:l[0].getValue("buddyicon").small,url:l[0].getValue("url")}}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.group;return n.push(new d.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},contacted:{setupView:function(t){return e.getView("follow-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(t){var e,n=t.userModels;return e=i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_FOLLOWED_YOU",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url")}),{headline:e,timestamp:t.timestamp,avatarData:{id:n[0].getValue("id"),type:"person",iconUrl:n[0].getValue("buddyicon").small,url:n[0].getValue("url")}}},loadContextMenuConfig:function(e){var n=[],i=[];e.userModels[0];return n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},group_invite:{setupView:function(t){return e.getView("group-invite-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var o,a=n.eventEntityModelsList[0].group,l=n.activityEntityModels.photo,u=n.userModels,s=!1,c=r(l);return n.activityData.countUsers>1?o=2===n.activityData.countUsers?i.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_INVITED_1_PHOTO_TO_GROUPS",personName:u[0].getValue("displayname"),personUrl:u[0].getValue("url"),person2Name:u[1].getValue("displayname"),person2Url:u[1].getValue("url")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_INVITED_1_PHOTO_TO_GROUPS",personName:u[0].getValue("displayname"),personUrl:u[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1)}):n.activityData.countEvents>1?o=i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_INVITED_1_PHOTO_TO_GROUPS",personName:u[0].getValue("displayname"),personUrl:u[0].getValue("url")}):(o=i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_INVITED_1_PHOTO_TO_GROUP",personName:u[0].getValue("displayname"),personUrl:u[0].getValue("url"),groupName:t.flutil.unescape(a.getValue("title")),groupUrl:a.getValue("urlPoolPage")}),s=!0),(n.activityData.countUsers>1||n.activityData.countEvents>1)&&(c.url=c.url+"#sub-photo-groups-section"),{headline:o,timestamp:n.timestamp,subtitle:t.flutil.unescape(a.getValue("title")),subtitleUrl:a.getValue("url"),avatarData:{id:u[0].getValue("id"),type:"person",iconUrl:u[0].getValue("buddyicon").small,url:u[0].getValue("url")},photo:c,showButtons:s}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.eventEntityModelsList[0].group;return n.push(new d.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},note:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var o,a=n.activityEntityModels.photo,l=n.userModels;return o=n.activityData.countUsers>1?2===n.activityData.countUsers?i.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_LEFT_NOTE_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),person2Name:l[1].getValue("displayname"),person2Url:l[1].getValue("url"),photoTitle:a.getValue("title"),photoUrl:a.getValue("url")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_LEFT_NOTE_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),photoTitle:a.getValue("title"),photoUrl:a.getValue("url")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_LEFT_NOTE_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),noteUrl:a.getValue("url"),noteContent:p(t.StringHelper.stripTags(n.eventDataList[0]._content),30)}),{headline:o,timestamp:n.timestamp,avatarData:{id:l[0].getValue("id"),type:"person",iconUrl:l[0].getValue("buddyicon").small,url:l[0].getValue("url")},photo:r(a)}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.photo;return n.push(new d.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},tag:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var o;if(n.activityData.photo){var a=n.activityEntityModels.photo,l=n.userModels,u=a.getValue("title").length>0;return o=n.activityData.countUsers>1?2===n.activityData.countUsers?u?i.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_TAGGED_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),person2Name:l[1].getValue("displayname"),person2Url:l[1].getValue("url"),photoTitle:a.getValue("title"),photoUrl:a.getValue("url")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_TAGGED_1_UNTITLED_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),person2Name:l[1].getValue("displayname"),person2Url:l[1].getValue("url"),photoTitle:a.getValue("title"),photoUrl:a.getValue("url"),mediaType:a.getValue("mediaType")}):u?i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_TAGGED_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers,e.lang,1),photoTitle:a.getValue("title"),photoUrl:a.getValue("url")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_TAGGED_1_UNTITLED_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers,e.lang,1),photoTitle:a.getValue("title"),photoUrl:a.getValue("url")}):n.activityData.countEvents>1?i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_MULTI_TAGGED_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),photoTitle:a.getValue("title"),photoUrl:a.getValue("url")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),tagUrl:a.getValue("url"),tagName:p(t.StringHelper.stripTags(n.eventDataList[0].tagText),30)}),{headline:o,timestamp:n.timestamp,avatarData:{id:l[0].getValue("id"),type:"person",iconUrl:l[0].getValue("buddyicon").small,url:l[0].getValue("url")},photo:r(a)}}var s=n.userModels[0],c=n.eventEntityModelsList.map(function(t){return t.photo});return o=i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_X_PHOTOS",personName:s.getValue("displayname"),personUrl:s.getValue("url"),photoCountString:n.activityData.countEvents}),{headline:o,timestamp:n.timestamp,avatarData:{id:s.getValue("id"),type:"person",iconUrl:s.getValue("buddyicon").small,url:s.getValue("url")},photos:c.map(function(t){return r(t)}).slice(0,12),hasMultiplePhotos:c.length>1}},loadContextMenuConfig:function(e){var n,i=[],o=[];return e.activityData.photo&&(n=e.activityEntityModels.photo,i.push(new d.muteNotification(e,{eventType:e.type,objectId:n.getValue("id")}))),i.push(new d.sendMessage(e)),i.push(new d.follow(e)),i.push(new d.block(e)),i.forEach(function(t){o.push(t.load())}),t.Promise.all(o).then(function(){return i})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},people:{setupView:function(t){
return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var o,a=n.userModels,l=n.activityEntityModels.photo,u=n.eventEntityModelsList[0].addedPerson;return o=u.getValue("id")===e.getViewer().nsid?i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_YOU_IN_PHOTO",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),photoUrl:l.getValue("url"),mediaType:l.getValue("mediaType")}):n.activityData.countUsers>1?2===n.activityData.countUsers?i.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_TAGGED_PEOPLE_IN_PHOTO",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),person2Name:a[1].getValue("displayname"),person2Url:a[1].getValue("url"),photoTitle:l.getValue("title"),photoUrl:l.getValue("url")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_TAGGED_PEOPLE_IN_PHOTO",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),photoTitle:l.getValue("title"),photoUrl:l.getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1)}):n.activityData.countEvents>1?i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_PEOPLE_IN_PHOTO",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),photoTitle:l.getValue("title"),photoUrl:l.getValue("url")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_1_PERSON_IN_PHOTO",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),taggedPersonName:u.getValue("displayname"),taggedPersonUrl:u.getValue("url"),photoTitle:l.getValue("title"),photoUrl:l.getValue("url")}),{headline:o,timestamp:n.timestamp,avatarData:{id:a[0].getValue("id"),type:"person",iconUrl:a[0].getValue("buddyicon").small,url:a[0].getValue("url")},photo:r(l)}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.photo;return n.push(new d.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},testimonial:{setupView:function(t){return e.getView("testimonial-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var o,a=n.userModels;return o=i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TESTIMONIAL",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),testimonialUrl:"/people/"+e.getViewer().nsid+"/#testimonial"+n.eventDataList[0].testimonial.id,testimonialContent:p(t.StringHelper.stripTags(n.eventDataList[0].testimonial.body),30)}),{headline:o,timestamp:n.timestamp,avatarData:{id:a[0].getValue("id"),type:"person",iconUrl:a[0].getValue("buddyicon").small,url:a[0].getValue("url")},isApproved:"1"===n.eventDataList[0].testimonial.approved}},loadContextMenuConfig:function(e){var n=[],i=[];e.userModels[0];return n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},group_user_invite:{setupView:function(t){return e.getView("group-user-invite-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,o=e.activityEntityModels.group,a=e.userModels,l=e.activityData.group;return n=i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_INVITED_YOU_TO_GROUP",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),groupName:t.flutil.unescape(o.getValue("title")),groupUrl:o.getValue("url")}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(o.getValue("title")),subtitleUrl:o.getValue("url"),avatarData:{id:a[0].getValue("id"),type:"person",iconUrl:a[0].getValue("buddyicon").small,url:a[0].getValue("url")},showButtons:l.isInvited,isMember:l.isMember}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.group;return n.push(new d.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},flickrmail:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,o=e.userModels;return n=i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_FLICKRMAIL",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url"),flickrmailUrl:"/mail/"+e.eventDataList[0].id,flickrmailContent:p(t.StringHelper.stripTags(e.eventDataList[0].subject),30)}),{headline:n,timestamp:e.timestamp,avatarData:{id:o[0].getValue("id"),type:"person",iconUrl:o[0].getValue("buddyicon").small,url:o[0].getValue("url")}}},loadContextMenuConfig:function(e){var n=[],i=[];e.userModels[0];return n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},photo_comment_mention:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var o,a=n.activityEntityModels.photo,l=n.userModels;return o=n.activityData.countUsers>1?2===n.activityData.countUsers?i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENT_MENTIONED_YOU_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),person2Name:l[1].getValue("displayname"),person2Url:l[1].getValue("url"),commentsUrl:a.getValue("url")+"/#comment"+n.eventDataList[0].commentid,personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1)}):i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENT_MENTIONED_YOU_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),commentsUrl:a.getValue("url")+"/#comment"+n.eventDataList[0].commentid}):i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_COMMENT_MENTIONED_YOU_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),commentUrl:a.getValue("url")+"/#comment"+n.eventDataList[0].commentid,commentContent:p(t.StringHelper.stripTags(n.eventDataList[0]._content),30)}),{headline:o,timestamp:n.timestamp,avatarData:{id:l[0].getValue("id"),type:"person",iconUrl:l[0].getValue("buddyicon").small,url:l[0].getValue("url")},photo:r(a)}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.photo;return n.push(new d.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},gallery:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var o,a=n.userModels,l=n.activityEntityModels.photo,u=n.eventEntityModelsList[0].gallery;return o=n.activityData.countUsers>1?2===n.activityData.countUsers?i.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_ADDED_1_PHOTO_TO_GALLERIES",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),person2Name:a[1].getValue("displayname"),person2Url:a[1].getValue("url")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_ADDED_1_PHOTO_TO_GALLERIES",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1)}):i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_ADDED_1_PHOTO_TO_GALLERY",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),galleryUrl:u.getValue("url"),galleryTitle:p(t.StringHelper.stripTags(u.getValue("title")),30)}),{headline:o,timestamp:n.timestamp,avatarData:{id:a[0].getValue("id"),type:"person",iconUrl:a[0].getValue("buddyicon").small,url:a[0].getValue("url")},photo:r(l)}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.photo;return n.push(new d.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},gallery_comment:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var o,a=n.userModels,l=n.activityEntityModels.gallery,r=l.getValue("coverPhotosData"),u=r.length>0?r[0]:void 0;return o=n.activityData.countUsers>1?2===n.activityData.countUsers?i.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_COMMENTED_ON_1_GALLERY",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),person2Name:a[1].getValue("displayname"),person2Url:a[1].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers,e.lang,1),galleryUrl:n.activityData.gallery.url,galleryTitle:p(t.StringHelper.stripTags(n.activityData.gallery.title.content),30)}):i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENTED_ON_1_GALLERY",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers,e.lang,1),galleryUrl:n.activityData.gallery.url,galleryTitle:p(t.StringHelper.stripTags(n.activityData.gallery.title.content),30)}):i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_COMMENTED_ON_1_GALLERY",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),galleryUrl:l.getValue("url"),galleryTitle:p(t.StringHelper.stripTags(l.getValue("title")),30),commentUrl:l.getValue("url")+"/#comment"+n.eventDataList[0].commentid,commentContent:p(t.StringHelper.stripTags(n.eventDataList[0]._content),30)}),{headline:o,timestamp:n.timestamp,avatarData:{id:a[0].getValue("id"),type:"person",iconUrl:a[0].getValue("buddyicon").small,url:a[0].getValue("url")},photo:{url:l.getValue("url"),displayUrl:u?u.url:void 0}}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.gallery;return n.push(new d.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},share:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(t){var e,n=t.activityEntityModels.photo,o=t.userModels,a=t.activityData.events[0].shareUrl;return e=i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_SHARED_1_PHOTO",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url"),photoTitle:n.getValue("title"),photoUrl:a||n.getValue("url")}),{headline:e,timestamp:t.timestamp,avatarData:{id:o[0].getValue("id"),type:"person",iconUrl:o[0].getValue("buddyicon").small,url:o[0].getValue("url")},photo:r(n)}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.photo;return n.push(new d.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},photo_accepted:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,o;if(e.activityData.photo){o=e.eventEntityModelsList[0].group;var a=e.activityEntityModels.photo;return n=i.intlHTMLMessage({intlName:"notifications.NOTIF_GROUP_ADMIN_APPROVED_1_PHOTO",groupName:t.flutil.unescape(o.getValue("title")),groupUrl:o.getValue("url")}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(o.getValue("title")),subtitleUrl:o.getValue("url"),avatarData:{id:o.getValue("id"),type:"group",iconUrl:o.getValue("bestIconURL"),url:o.getValue("url")},photo:r(a)}}o=e.activityEntityModels.group;var l=e.eventEntityModelsList.map(function(t){return t.photo});return n=i.intlHTMLMessage({intlName:"notifications.NOTIF_GROUP_ADMIN_APPROVED_X_PHOTOS",groupName:t.flutil.unescape(o.getValue("title")),groupUrl:o.getValue("url"),photoCountString:e.activityData.countEvents}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(o.getValue("title")),subtitleUrl:o.getValue("url"),avatarData:{id:o.getValue("id"),type:"group",iconUrl:o.getValue("bestIconURL"),url:o.getValue("url")},photos:l.map(function(t){return r(t)}).slice(0,12),hasMultiplePhotos:!0}},loadContextMenuConfig:function(e){var n,i=[],o=[];return n=e.activityData.photo?e.activityEntityModels.photo:e.eventEntityModelsList.map(function(t){return t.photo})[0],i.push(new d.muteNotification(e,{eventType:e.type,objectId:n.getValue("id")})),i.push(new d.joinGroup(e)),i.forEach(function(t){o.push(t.load())}),t.Promise.all(o).then(function(){return i})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},photo_declined:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,o;if(e.activityData.photo){o=e.eventEntityModelsList[0].group;var a=e.activityEntityModels.photo;return n=i.intlHTMLMessage({intlName:"notifications.NOTIF_GROUP_ADMIN_REJECTED_1_PHOTO",groupName:t.flutil.unescape(o.getValue("title")),groupUrl:o.getValue("url")}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(o.getValue("title")),subtitleUrl:o.getValue("url"),avatarData:{id:o.getValue("id"),type:"group",iconUrl:o.getValue("bestIconURL"),url:o.getValue("url")},photo:r(a)}}o=e.activityEntityModels.group;var l=e.eventEntityModelsList.map(function(t){return t.photo});return n=i.intlHTMLMessage({intlName:"notifications.NOTIF_GROUP_ADMIN_REJECTED_X_PHOTOS",groupName:t.flutil.unescape(o.getValue("title")),groupUrl:o.getValue("url"),photoCountString:e.activityData.countEvents}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(o.getValue("title")),subtitleUrl:o.getValue("url"),avatarData:{id:o.getValue("id"),type:"group",iconUrl:o.getValue("bestIconURL"),url:o.getValue("url")},photos:l.map(function(t){return r(t)}).slice(0,12),hasMultiplePhotos:!0}},loadContextMenuConfig:function(e){var n,i=[],o=[];return n=e.activityData.photo?e.activityEntityModels.photo:e.eventEntityModelsList.map(function(t){return t.photo})[0],i.push(new d.muteNotification(e,{eventType:e.type,objectId:n.getValue("id")})),i.push(new d.joinGroup(e)),i.forEach(function(t){o.push(t.load())}),t.Promise.all(o).then(function(){return i})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},photo_mention:{},group_blast:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,o=e.userModels,a=e.eventEntityModelsList[0].group;return n=i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_UPDATED_GROUP_BLAST",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url"),groupName:t.flutil.unescape(a.getValue("title")),groupUrl:a.getValue("url"),blastUrl:a.getValue("url"),blastContent:p(t.StringHelper.stripTags(e.eventDataList[0].group.blast),30)}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(a.getValue("title")),subtitleUrl:a.getValue("url"),avatarData:{id:o[0].getValue("id"),type:"person",iconUrl:o[0].getValue("buddyicon").small,url:o[0].getValue("url")}}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.eventEntityModelsList[0].group;return n.push(new d.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},group_rules:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,o=e.userModels,a=e.eventEntityModelsList[0].group;return n=i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_UPDATED_GROUP_RULES",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url"),groupName:t.flutil.unescape(a.getValue("title")),groupUrl:a.getValue("url"),rulesUrl:a.getValue("url"),rulesContent:p(t.StringHelper.stripTags(e.eventDataList[0].group.rules),30)}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(a.getValue("title")),subtitleUrl:a.getValue("url"),avatarData:{id:o[0].getValue("id"),type:"person",iconUrl:o[0].getValue("buddyicon").small,url:o[0].getValue("url")}}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.eventEntityModelsList[0].group;return n.push(new d.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},group_description:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,o=e.userModels,a=e.eventEntityModelsList[0].group;return n=i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_UPDATED_GROUP_DESCRIPTION",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url"),groupName:t.flutil.unescape(a.getValue("title")),groupUrl:a.getValue("url"),descriptionUrl:a.getValue("url"),descriptionContent:p(t.StringHelper.stripTags(e.eventDataList[0].group.description),30)}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(a.getValue("title")),subtitleUrl:a.getValue("url"),avatarData:{id:o[0].getValue("id"),type:"person",iconUrl:o[0].getValue("buddyicon").small,url:o[0].getValue("url")}}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.eventEntityModelsList[0].group;return n.push(new d.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},upload:{},photo_bot_moderated:{extractEntitiesFromResponse:function(t){return u(t)},setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(t){var e,n=t.activityEntityModels.photo,o=r(n),a=n.getValue("safetyLevel");return o.url&&(o.url+="?isModerated=true"),1===a?e=i.intlHTMLMessage({intlName:"notifications.NOTIF_PHOTO_MODERATED_MODERATE",learnUrl:"https://help.flickr.com/en_us/set-the-safety-levels-of-your-flickr-content-or-account-BJlsk6mjym"}):2===a&&(e=i.intlHTMLMessage({intlName:"notifications.NOTIF_PHOTO_MODERATED_RESTRICTED",learnUrl:"https://help.flickr.com/en_us/set-the-safety-levels-of-your-flickr-content-or-account-BJlsk6mjym"})),{headline:e,timestamp:t.timestamp,learnUrl:"https://help.flickr.com/en_us/set-the-safety-levels-of-your-flickr-content-or-account-BJlsk6mjym",photo:o}}},group_join_request:{setupView:function(t){return e.getView("group-join-request-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var o,a=n.activityEntityModels.group,l=n.userModels;return o=n.activityData.countUsers>1?i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_REQUESTED_TO_JOIN",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),memberQueueUrl:a.getValue("urlPendingMembersPage")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_REQUESTED_TO_JOIN",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),groupName:t.flutil.unescape(a.getValue("title")),groupUrl:a.getValue("url")}),{headline:o,timestamp:n.timestamp,subtitle:t.flutil.unescape(a.getValue("title")),subtitleUrl:a.getValue("url"),avatarData:{id:l[0].getValue("id"),type:"person",iconUrl:l[0].getValue("buddyicon").small,url:l[0].getValue("url")},showButtons:n.activityData.countUsers<=1}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.group;return n.push(new d.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},group_photo_request:{setupView:function(t){return e.getView("group-photo-request-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var o,a,l=n.eventEntityModelsList.map(function(t){return t.photo})[0],u=n.activityEntityModels.group,s=n.userModels;return n.activityData.countUsers>1?o=i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_ADDED_PHOTOS_TO_QUEUE",personName:s[0].getValue("displayname"),personUrl:s[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),pendingQueueUrl:u.getValue("urlPendingPhotosPage")}):n.activityData.countEvents>1?o=i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_ADDED_PHOTOS_TO_QUEUE",personName:s[0].getValue("displayname"),personUrl:s[0].getValue("url"),pendingQueueUrl:u.getValue("urlPendingPhotosPage")}):(o=i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_ADDED_1_PHOTO_TO_QUEUE",personName:s[0].getValue("displayname"),personUrl:s[0].getValue("url"),pendingQueueUrl:u.getValue("urlPendingPhotosPage")}),a=r(l)),{headline:o,timestamp:n.timestamp,subtitle:t.flutil.unescape(u.getValue("title")),subtitleUrl:u.getValue("url"),avatarData:{id:s[0].getValue("id"),type:"person",iconUrl:s[0].getValue("buddyicon").small,url:s[0].getValue("url")},photo:a,showButtons:n.activityData.countUsers<=1&&n.activityData.countEvents<=1}},loadContextMenuConfig:function(e){var i=[],o=[],a=e.activityEntityModels.group;return i.push(new d.muteNotification(e,{eventType:e.type,objectId:a.id})),i.push(new d.sendMessage(e)),i.push(new d.follow(e)),i.push(new d.block(e)),i.forEach(function(t){o.push(t.load())}),t.Promise.all(o).then(function(){return i}).catch(function(t){n.error("error loading context menu config")})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},group_cover_photo:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,o=e.eventEntityModelsList[0].group,a=e.activityEntityModels.photo,l=e.userModels;return n=i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_SET_GROUP_COVER_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),groupName:t.flutil.unescape(o.getValue("title")),groupUrl:o.getValue("url")}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(o.getValue("title")),subtitleUrl:o.getValue("url"),avatarData:{id:l[0].getValue("id"),type:"person",iconUrl:l[0].getValue("buddyicon").small,url:l[0].getValue("url")},photo:r(a)}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.eventEntityModelsList[0].group;return n.push(new d.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new d.sendMessage(e)),n.push(new d.follow(e)),n.push(new d.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},comment_after_your_comment:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var o,a=n.activityEntityModels.photo,l=n.userModels;return o=n.activityData.countUsers>1?2===n.activityData.countUsers?i.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_COMMENTED_AFTER_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),person2Name:l[1].getValue("displayname"),person2Url:l[1].getValue("url"),photoTitle:a.getValue("title"),photoUrl:a.getValue("url")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENTED_AFTER_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),photoTitle:a.getValue("title"),photoUrl:a.getValue("url")}):i.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_COMMENTED_AFTER_1_PHOTO",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),commentUrl:a.getValue("url")+"/#comment"+n.eventDataList[0].commentid,commentContent:p(t.StringHelper.stripTags(n.eventDataList[0]._content),30)}),{headline:o,timestamp:n.timestamp,avatarData:{id:l[0].getValue("id"),type:"person",iconUrl:l[0].getValue("buddyicon").small,url:l[0].getValue("url")},photo:r(a)}},loadContextMenuConfig:function(e){var n,i=[],o=[];return n=e.activityEntityModels.photo,i.push(new d.muteNotification(e,{eventType:e.type,objectId:n.getValue("id")})),i.push(new d.sendMessage(e)),i.push(new d.follow(e)),i.push(new d.block(e)),i.forEach(function(t){o.push(t.load())}),t.Promise.all(o).then(function(){return i})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},group_join_request_accepted:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,o=e.activityEntityModels.group;e.userModels;return n=i.intlHTMLMessage({intlName:"notifications.NOTIF_GROUP_ADMIN_JOIN_REQUEST_ACCEPTED",groupName:t.flutil.unescape(o.getValue("title")),groupUrl:o.getValue("url")}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(o.getValue("title")),subtitleUrl:o.getValue("url"),avatarData:{id:o.getValue("id"),type:"group",iconUrl:o.getValue("bestIconURL"),url:o.getValue("url")}}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.group;return n.push(new d.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new d.joinGroup(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}}};var M={extractEntitiesFromResponse:function(e){try{return u(e)}catch(e){return t.Promise.resolve({})}},setupView:function(t){var e=t.type;try{return m[e].setupView(t)}catch(t){return}},getTemplateHtml:function(t){var e,n=t.type;try{return e=m[n].constructTemplateConfig(t),y.getTemplate(o[n])(e)}catch(t){return""}},loadContextMenuConfig:function(e){var n=e.type;try{return m[n].loadContextMenuConfig(e)}catch(e){return t.Promise.reject(e)}},getContextMenuConfig:function(e){try{return m[e.item.type].getContextMenuConfig(e)}catch(e){return t.Promise.reject(e)}},getFilterConfig:function(t){return h[t]},convertNotificationModel:function(t){return{id:t.getValue("id"),isSeen:t.getValue("isSeen"),isMuted:t.getValue("isMuted"),type:t.getValue("type"),timestamp:t.getValue("timestamp"),model:t,activityData:t.getValue("activityData"),eventDataList:t.getValue("eventDataList"),userModels:t.getValue("userModels"),activityEntityModels:t.getValue("activityEntityModels"),eventEntityModelsList:t.getValue("eventEntityModelsList")}}};return t.augment(M,t.EventTarget),M}},"@VERSION@",{
requires:["event-custom","template-lib-helper","api-helper","intl-number","string-helper","group-status-helper","base-notification-item-view","follow-notification-item-view","testimonial-notification-item-view","group-invite-notification-item-view","hermes-template-notification-core","hermes-template-notif-item-fave","hermes-template-notif-item-comment","hermes-template-notif-item-reply-reply","hermes-template-notif-item-group-topic-new","hermes-template-notif-item-contacted","hermes-template-notif-item-group-invite","hermes-template-notif-item-note","hermes-template-notif-item-tag","hermes-template-notif-item-people","hermes-template-notif-item-testimonial","hermes-template-notif-item-group-user-invite","hermes-template-notif-item-flickrmail","hermes-template-notif-item-photo-comment-mention","hermes-template-notif-item-gallery","hermes-template-notif-item-gallery-comment","hermes-template-notif-item-share","hermes-template-notif-item-photo-accepted","hermes-template-notif-item-photo-declined","hermes-template-notif-item-photo-mention","hermes-template-notif-item-group-blast","hermes-template-notif-item-group-rules","hermes-template-notif-item-group-description","hermes-template-notif-item-upload","hermes-template-notif-item-moderated","hermes-template-notif-item-group-join-request","hermes-template-notif-item-group-photo-request","hermes-template-notif-item-comment-after-your-comment","hermes-template-notif-item-group-cover-photo","hermes-template-notif-item-group-join-request-accepted"],langBundles:["common","relative-dates","notifications","profile","group-admin","photo-card","header","settings-notifications"]});YUI.add("hermes-lang-profile",function(e,o){e.Intl.add("hermes/profile","en-US",{MEMBER_DESCRIPTION:["Description"],MEMBER_INFO:["Member info"],EMPTY_DESCRIPTION:["Write a little about yourself"],ABOUT_USERNAME:["About ","${username}"],MOST_POPULAR_PHOTOS:["Most popular photos"],MOST_POPULAR_PHOTOS_EMPTY_TITLE:["Your most popular photos will appear here."],MOST_POPULAR_PHOTOS_EMPTY_TEXT:["Set your photos to public for more faves, comments and views."],MOST_POPULAR_PHOTOS_EMPTY_TEXT_2:["For even more exposure, add them to Groups"],HAS_NO_PUBLIC_PHOTOS_YET:["${username}"," hasn't made any photos public yet."],MOST_POPULAR_PHOTOS_GO_TO_CR:["Go to Camera Roll"],TESTIMONIALS:["Testimonials"],PHOTOS_OF:["Photos of ","${username}"],READ_MORE:["Read more"],READ_LESS:["Read less"],EDIT_DESCRIPTION:["Edit description"],EDIT_INFOS:["Edit your profile information"],EDIT_SHOWCASE:["Edit your showcase"],CHANGE_SHOWCASE_PHOTOS:["Change your showcase photos"],SHOWCASE_FULL:["Your showcase is full! Change photos"],SHOWCASE_ALMOST_FULL:["One photo to go, choose well!"],ADD_PHOTOS:["Add photos"],VIEW_ALL:["View all"],THIS_YOUR_SHOWCASE:["This is your showcase."],SHOW_OFF_YOUR_PHOTOS:["Show off up to ","${limit}"," of your photos."],GET_STARTED:["Get started"],CHOOSE_UP_TO_PHOTOS:[{type:"plural",valueName:"limit",options:{one:"Choose up to ${#} more photo",other:"Choose up to ${#} more photos"}}],SELECT_PHOTOS:["Select photos"],SHOWCASE_ALREADY_THERE:["This photo is already in your showcase."],SHOWCASE_ERR:["An error has occurred. Please refresh the page."],BIO_JOINED:["Joined"],BIO_OCCUPATION:["Occupation"],BIO_HOMETOWN:["Hometown"],BIO_CURRENT_CITY:["Current city"],BIO_COUNTRY:["Country"],BIO_WEBSITE:["Website"],BIO_EMAIL:["Email"],BIO_FACEBOOK:["Facebook"],BIO_TWITTER:["Twitter"],BIO_INSTAGRAM:["Instagram"],BIO_PINTEREST:["Pinterest"],BIO_TUMBLR:["Tumblr"],BIO_RELATIONSHIP:["Relationship"],COUNTS_GROUPS:[{type:"plural",valueName:"groupsCount",options:{one:"group",other:"groups"}}],COUNTS_GEOTAGGED:[{type:"plural",valueName:"geoCount",options:{one:"geotagged photo",other:"geotagged photos"}}],COUNTS_GEOTAGS:[{type:"plural",valueName:"geoCount",options:{one:"geotag",other:"geotags"}}],COUNTS_FAVORITES:[{type:"plural",valueName:"favesCount",options:{one:"fave",other:"faves"}}],COUNTS_TAGS:[{type:"plural",valueName:"tagsCount",options:{one:"tag",other:"tags"}}],COUNT_VIEWS:[{type:"plural",valueName:"viewsCount",options:{one:"view",other:"views"}}],BLOCK_USER:["Block user"],FILTER_FAVES:["Most faved"],FILTER_VIEWS:["Most viewed"],FILTER_COMMENTS:["Most commented"],FILTER_INTERESTING:["Most interesting"],AWESOME:["Awesome!"],REFRESH_NOW:["Refresh now to see your showcase."],TOO_MANY_PHOTOS:["Sorry, you can't add more than ","${limit}"," photos to your showcase."],PROFILE_SHARE_FEEDBACK:['This new Flickr Profile is only visible to Alpha Group members. Please share your feedback <a href="',"${url}",'">here</a>.'],PROFILE_SHARE_FEEDBACK_ONBOARDING:['Profiles got a makeover. We really want to know what you think. <a href="',"${url}",'">Send us some feedback!</a>'],PROFILE_CHECK_OUT:['Profiles got a makeover â€” check out your <a href="',"${urlAbout}",'">new About page</a>! Then, <a href="',"${urlFeedback}",'" target="_blank">let us know what you think</a>!'],PROFILE_PHOTO_NOT_PUBLIC:["This photo does not seem to be public."],PROFILE_SAVED_MAGICALLY:["Changes are saved automagically!"],PROFILE_SAVED_AUTO:["Changes are saved automatically!"],SAVING:["Saving"],PLACEHOLDER_SOCIAL:["Your username or profile link"],EVERYONE:["Everyone"],ANY_FLICKR_MEMBER:["Any Flickr Member"],PEOPLE_I_FOLLOW:["People I follow"],FRIENDS_AND_FAMILY:["Friends and family"],ONLY_ME:["Only me"],USER_FOLLOWS_YOU:["${username}"," is following you."],USER_IS_FAMILY:["${username}"," counts you as Family."],USER_IS_FRIEND:["${username}"," counts you as a Friend."],USER_IS_FRIEND_FAMILY:["${username}"," counts you as Friend & Family."],TESTIM_PENDING:["Pending"],TESTIM_EMPTY_SELF:["Nobody has added a testimonial for you yet."],TESTIM_EMPTY_SOMEONE:["Nobody has added a testimonial yet."],TESTIM_EMPTY:["Have something nice to say about ","${username}","?"],TESTIM_WRITE:["Write a testimonial"],TESTIM_POST:["Post"],TESTIM_SHOW_MORE:["View more"],TESTIM_APPROVE:["Approve"],TESTIM_REJECT:["Reject"],TESTIM_SENT_APPROVAL:["Your testimonial will be sent to ","${username}"," for approval."],TESTIM_SENT_APPROVAL_SHOWN:["Your testimonial will be shown once ","${username}"," approves it."],TESTIM_GREAT_TITLE:["Great!"],TESTIM_DELETE_CONFIRM:["Delete this post?"],TESTIM_DELETE_TEXT:["You cannot reverse this action. Are you sure you want to permanently delete this post?"],TESTIM_EDIT_CONFIRM_TITLE:["Edit this post?"],TESTIM_EDIT_CONFIRM_TEXT:["If you choose to edit this post, it will be sent back to the person you're writing about for approval."],TESTIM_EDIT_VISIT_PROFILE:["You can edit this testimonial on ","${username}","'s profile."],TESTIM_EDIT_VISIT_PROFILE_TEXT:["If you choose to edit this post, it will be sent back to ","${username}"," for their approval."],TESTIM_EDIT_VISIT_PROFILE_GO:["Go to profile"],YOUR_SELECTION_HEADER:["Your Selection"],NO_PHOTOS_SELECTED:["No photos selected."],SELECTED:["Selected"],PROFILE_SHOWCASE_TITLE:["Profile showcase"],PROFILE_SHOWCASE_TITLE_SHORT:["Showcase"],PROFILE_WHATS_NEW:["Whatâ€™s new?"],PROFILE_BIO_TOOLTIP:["Add a few more details about yourself to complete your profile."],PROFILE_POPULAR_TOOLTIP:["These are your most popular photos on Flickr. You can choose to have this section visible to everyone or only to you."],PROFILE_PHOTOSOF_TOOLTIP:["You can tag and untag yourself in photos by visiting the â€œPeople in photoâ€ section on the photo page."],PROFILE_PHOTOSOF_MODAL_TITLE:["Untag yourself from this photo ?"],PROFILE_CHECK_IT_OUT:["Check it out"],PROFILE_GOT_IT:["Got it, thanks"],TESTIM_FILTER_RECEIVED:["Received"],TESTIM_FILTER_GIVEN:["Given"],TESTIM_NOTHING_TO_SHOW:["Nothing to show."],TESTIM_POSTED_ON:[{type:"date",valueName:"intlDate",format:"long"}],TESTIM_AUTHOR_SAYS:['<a href="',"${url}",'" class="username">',"${displayname}","</a> says:"],TESTIM_AUTHOR_FOR:['For <a href="',"${url}",'" class="username">',"${displayname}","</a>:"]})},"@VERSION@",{requires:["intl"]});